__require=function e(t,o,n){function i(a,s){if(!o[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AppComponent:[function(e,t,o){"use strict";cc._RF.push(t,"ee851Ut0m1Fy45xbYJKsVw5","AppComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./modules/play/PlayStageControlComponent"),i=e("./modules/main/MainControlComponent"),r=e("./modules/warehouse/KnifeWarehouseComponent"),a=e("./modules/done/ContinueComponent"),s=e("./modules/done/DoneComponent"),c=e("./utils/StorageUtils"),d=e("./Constants"),u=e("./utils/ConfigUtil"),l=e("./modules/bridge/JSInterfaceUtils"),f=cc._decorator,p=f.ccclass,h=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainPagePrefab=null,t.playStagePrefab=null,t.warehousePagePrefab=null,t.continuePagePrefab=null,t.donePagePrefab=null,t.settingPagePrefabe=null,t.canvasNode=null,t.mainPageNode=null,t.playStageNode=null,t.warehousePageNode=null,t.continuePageNode=null,t.donePageNode=null,t.settingPageNode=null,t.stage=1,t.bestStage=0,t.bestScore=0,t.stageboss=1,t.totalStage=0,t.roundCount=0,t.enterGameTime=(new Date).getTime(),t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;o.instance||(o.instance=this),c.default.shared.init(function(){u.default.shared.init(function(){e.jumpToMainPage(),e.preloadKnifesResource()})})},t.prototype.start=function(){cc.director.getCollisionManager().enabled=!0},t.prototype.jumpToMainPage=function(){this.mainPageNode=cc.instantiate(this.mainPagePrefab),this.mainPageNode.getComponent(cc.Widget).target=this.canvasNode,this.mainPageNode.getComponent(i.default).setClickEvents(this.node),this.mainPageNode.getComponent(i.default).updateUserKnife(),this.canvasNode.removeAllChildren(),this.canvasNode.addChild(this.mainPageNode)},t.prototype.jumpToPlayStage=function(){this.roundCount++,this.totalStage++,this.bestStage=0==this.bestStage?1:this.bestStage,this.stage=1,this.stageboss=c.default.shared.getInt(d.Constants.KEY_BOSS,1),this.stageboss=this.stageboss-2>1?this.stageboss-2:1,this.stageboss=this.stageboss>d.Constants.COUNT_TOTAL_BOSS_STAGE?1:this.stageboss,c.default.shared.putInt(d.Constants.KEY_ENTER_PLAY_TIME,(new Date).getTime()),this.playStageNode=cc.instantiate(this.playStagePrefab),this.playStageNode.getComponent(cc.Widget).target=this.canvasNode,this.playStageNode.getComponent(n.default).init(this.node,this.stage,this.stageboss,0,!1),this.canvasNode.removeAllChildren(),this.canvasNode.addChild(this.playStageNode),l.default.addShortcut()},t.prototype.continuePlay=function(){this.canvasNode.removeAllChildren(),this.playStageNode||(this.playStageNode=cc.instantiate(this.playStagePrefab)),this.canvasNode.addChild(this.playStageNode),this.playStageNode.getComponent(n.default).continuePlay()},t.prototype.jumpToNextStage=function(e,t,o){this.stage++,this.totalStage++,this.bestStage=this.bestStage>this.stage?this.bestStage:this.stage,this.bestScore=this.bestScore>e?this.bestScore:e,this.stageboss=t,this.stageboss=this.stageboss>d.Constants.COUNT_TOTAL_BOSS_STAGE?1:this.stageboss,this.stageboss>c.default.shared.getInt(d.Constants.KEY_BOSS,1)&&c.default.shared.putInt(d.Constants.KEY_BOSS,this.stageboss),this.stage>d.Constants.COUNT_TOTAL_STAGE?this.playStageNode.getComponent(n.default).onAllStagesWin():(c.default.shared.putInt(d.Constants.KEY_STAGE,this.stage),this.playStageNode||(this.playStageNode=cc.instantiate(this.playStagePrefab),this.playStageNode.getComponent(cc.Widget).target=this.canvasNode),this.playStageNode.getComponent(n.default).init(this.node,this.stage,this.stageboss,e,o))},t.prototype.jumpToWarehousePage=function(){this.warehousePageNode=cc.instantiate(this.warehousePagePrefab),this.warehousePageNode.getComponent(cc.Widget).target=this.canvasNode,this.warehousePageNode.getComponent(r.default).init(this.node),this.canvasNode.addChild(this.warehousePageNode)},t.prototype.jumpToContinuePage=function(e,t){this.bestScore=this.bestScore>t?this.bestScore:t,l.default.hasRewardAd()?(this.continuePageNode=cc.instantiate(this.continuePagePrefab),this.continuePageNode.getComponent(cc.Widget).target=this.canvasNode,this.continuePageNode.getComponent(a.default).init(e,t,this.node),this.canvasNode.addChild(this.continuePageNode)):this.jumpToDonePage(e,t)},t.prototype.jumpToDonePage=function(e,t){this.bestScore=this.bestScore>t?this.bestScore:t,this.canvasNode.removeChild(this.continuePageNode),this.donePageNode=cc.instantiate(this.donePagePrefab),this.donePageNode.getComponent(cc.Widget).target=this.canvasNode,this.donePageNode.getComponent(s.default).init(e,t,this.node),this.canvasNode.addChild(this.donePageNode),l.default.watchInterstitialAd(d.Constants.POSTION_GAME_END,"")},t.prototype.getCurrentStage=function(){return this.playStageNode?this.playStageNode.getComponent(n.default).getCurrentStage():1},t.prototype.jumpToSettingPage=function(){this.settingPageNode=cc.instantiate(this.settingPagePrefabe),this.settingPageNode.getComponent(cc.Widget).target=this.canvasNode,this.canvasNode.addChild(this.settingPageNode)},t.prototype.updateMainPageKnife=function(){this.mainPageNode&&this.mainPageNode.getComponent(i.default).updateUserKnife()},t.endGame=function(){l.default.logAnalyticsEvent("ThrowingMaster_Life_Time","game_time",String(Math.floor(((new Date).getTime()-o.instance.enterGameTime)/1e3)),"game_round",String(o.instance.roundCount),"game_stage",String(o.instance.totalStage),"game_best_stage",String(o.instance.bestStage),"game_best_score",String(o.instance.bestScore),"coin_number",c.default.shared.getString(d.Constants.KEY_CURRENCY,"0"),"knife_unlock_number",String(c.default.shared.getString(d.Constants.KEY_USER_GAINED_KNIFES,d.Constants.DEFAULT_USER_KNIFE_ID).split(",").length))},t.prototype.preloadKnifesResource=function(){for(var e=c.default.shared.getString(d.Constants.KEY_USER_KNIFE,d.Constants.DEFAULT_USER_KNIFE_ID),t=u.default.shared.getIndexFromKnifeId(e),o=t-3;o<t;o++)u.default.shared.hasKnife(u.default.shared.getKnifeId(o))&&u.default.shared.getKnifeResourceUrl(u.default.shared.getKnifeId(o));for(o=t+1;o<t+4;o++)u.default.shared.hasKnife(u.default.shared.getKnifeId(o))&&u.default.shared.getKnifeResourceUrl(u.default.shared.getKnifeId(o))},t.instance=null,__decorate([h(cc.Prefab)],t.prototype,"mainPagePrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"playStagePrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"warehousePagePrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"continuePagePrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"donePagePrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"settingPagePrefabe",void 0),__decorate([h(cc.Node)],t.prototype,"canvasNode",void 0),t=o=__decorate([p],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./Constants":"Constants","./modules/bridge/JSInterfaceUtils":"JSInterfaceUtils","./modules/done/ContinueComponent":"ContinueComponent","./modules/done/DoneComponent":"DoneComponent","./modules/main/MainControlComponent":"MainControlComponent","./modules/play/PlayStageControlComponent":"PlayStageControlComponent","./modules/warehouse/KnifeWarehouseComponent":"KnifeWarehouseComponent","./utils/ConfigUtil":"ConfigUtil","./utils/StorageUtils":"StorageUtils"}],AppleControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"294fcSoCXxJdo8FtIbPgkV4","AppleControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PlayStageControlComponent"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stageNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){cc.log("AppleControlComponent onLoad")},t.prototype.start=function(){},t.prototype.onCollisionEnter=function(e,t){1==e.tag&&3==t.tag&&this.stageNode.getComponent(n.default).onAppleHit(this.node,this.node.convertToWorldSpace(this.node.getAnchorPoint()).x,this.node.convertToWorldSpace(this.node.getAnchorPoint()).y)},t.prototype.setPlayStageNode=function(e){this.stageNode=e},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"./PlayStageControlComponent":"PlayStageControlComponent"}],ApplePartsControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"a9e17vc1ZpL8J+2/iUOFo74","ApplePartsControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./FallingControlComponent"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftAppleNode=null,t.rightAppleNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){cc.log("ApplePartsControlComponent onLoad")},t.prototype.split=function(){this.leftAppleNode.getComponent(n.default).split(90+90*Math.random(),n.Direction.LEFT),this.rightAppleNode.getComponent(n.default).split(90*Math.random(),n.Direction.RIGHT)},__decorate([a(cc.Node)],t.prototype,"leftAppleNode",void 0),__decorate([a(cc.Node)],t.prototype,"rightAppleNode",void 0),t=__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./FallingControlComponent":"FallingControlComponent"}],BoardControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"6e3ab8lYZ5JBrPmggoHxJtw","BoardControlComponent"),Object.defineProperty(o,"__esModule",{value:!0}),o.NODE_NAME_BOARD="board";var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotation=[],t.posX=0,t.posY=0,t.rotationInterval=0,t.rotationSpeed=0,t.totalRotationTime=0,t.shakeDuration=0,t.totalTwinkleTime=0,t.rotationEnable=!1,t.twinkleEnable=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.posX=this.node.getPositionX(),this.posY=this.node.getPositionY()},t.prototype.start=function(){},t.prototype.update=function(e){if(this.rotationEnable){this.totalRotationTime+=e;for(var t=0,o=0;o<this.rotation.length&&(t+=this.rotation[o].interval,!(this.totalRotationTime%this.rotationInterval<t));o++);"linear"==this.rotation[o].interpolator&&0!=this.rotation[o].interval?this.rotationSpeed=this.rotation[o].targetSpeed-(0==o?0:this.rotation[o-1].targetSpeed)*(this.totalRotationTime%this.rotationInterval+this.rotation[o].interval-t)/this.rotation[o].interval:this.rotationSpeed=this.rotation[o].targetSpeed,this.node.rotation+=this.rotationSpeed*e}},t.prototype.startRotation=function(){this.rotationEnable=!0},t.prototype.stopRotation=function(){this.rotationEnable=!1},t.prototype.onKnifeInserted=function(){this.shakeDuration=.1,this.startShake(15),this.totalTwinkleTime=0,this.twinkleEnable=!0},t.prototype.setRotationSpeed=function(e){this.rotation=e,this.totalRotationTime=0,this.rotationInterval=0;for(var t=0;t<this.rotation.length;t++)this.rotationInterval+=this.rotation[t].interval},t.prototype.startShake=function(e){},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],BoardPartsControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"290e6d+z8xIALqsdHlgVWo4","BoardPartsControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../components/FallingControlComponent"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstBoardNode=null,t.secondBoardNode=null,t.thirdBoardNode=null,t.fourthBoardNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){cc.log("BoardPartsControlComponent onLoad")},t.prototype.start=function(){},t.prototype.split=function(){this.firstBoardNode.getComponent(n.default).split(60*Math.random(),n.Direction.RIGHT),this.secondBoardNode.getComponent(n.default).split(60*Math.random()+60,n.Direction.LEFT),this.thirdBoardNode.getComponent(n.default).split(60*Math.random()+150,n.Direction.LEFT),this.fourthBoardNode.getComponent(n.default).split(60*Math.random()+210,n.Direction.LEFT)},__decorate([a(cc.Node)],t.prototype,"firstBoardNode",void 0),__decorate([a(cc.Node)],t.prototype,"secondBoardNode",void 0),__decorate([a(cc.Node)],t.prototype,"thirdBoardNode",void 0),__decorate([a(cc.Node)],t.prototype,"fourthBoardNode",void 0),t=__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../../components/FallingControlComponent":"FallingControlComponent"}],ConfigUtil:[function(e,t,o){"use strict";cc._RF.push(t,"49248i3xrBDV6WweLuVU40B","ConfigUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("../Constants"),r=e("./StorageUtils");(function(e){e[e.BUY=1]="BUY",e[e.REWARD_ADS=2]="REWARD_ADS",e[e.DEFEAT_BOSS=3]="DEFEAT_BOSS"})(n=o.KnifeObtainMethod||(o.KnifeObtainMethod={}));var a=function(){function e(){this.configJson=null,window.ConfigUtil=e}return Object.defineProperty(e,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new e),this.sharedInstance},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;cc.loader.loadRes("config",cc.JsonAsset,function(o,n){o?cc.log(o):(t.configJson=n,e())})},e.prototype.getBossName=function(e){return this.configJson.json.stages["stageboss"+e].boss},e.prototype.getBossRewardKnife=function(e){return this.configJson.json.stages["stageboss"+e].reward},e.prototype.getBossHitAudioResourceUrl=function(e){return this.configJson.json.stages["stageboss"+e].knifeInsertedAudio},e.prototype.getPlayStageUserKnifesCount=function(e){return this.configJson.json.stages[e].knifes.count},e.prototype.getStageIdByIndex=function(e,t){return e%i.Constants.INTERVAL_BOSS_STAGE==0?"stageboss"+t:"stage"+e},e.prototype.getKnifeId=function(e){return"knife"+e},e.prototype.getIndexFromKnifeId=function(e){return Number(e.substr("knife".length))},e.prototype.getIndexFromAdResult=function(e){return Number(e.substr(i.Constants.WATCH_AD_FOR_KNIFE.length))},e.prototype.getKnifeResourceUrl=function(e){return this.configJson.json.knifes[e].resource},e.prototype.getKnifeInsertLength=function(e){return this.configJson.json.knifes[e].insertLength},e.prototype.getKnifeLength=function(e){return this.configJson.json.knifes[e].length},e.prototype.getKnifeObtainMethod=function(e){return this.configJson.json.knifes[e].obtaining},e.prototype.getKnifePrice=function(e){return this.configJson.json.knifes[e].price},e.prototype.getPresetKnifesArray=function(e){return this.configJson.json.stages[e].knifes.origin.items},e.prototype.getPresetKnifePositionAngle=function(e,t){return this.configJson.json.stages[e].knifes.origin.items[t].position},e.prototype.getPresetKnifeId=function(e,t){return this.configJson.json.stages[e].knifes.origin.items[t].reference},e.prototype.getPresetApplesArray=function(e){return this.configJson.json.stages[e].apples.items},e.prototype.getPresetAppleId=function(e,t){return this.configJson.json.stages[e].apples.items[t].reference},e.prototype.getAppleResourceUrl=function(e){return this.configJson.json.apples[e].resource},e.prototype.getPresetApplePositionAngle=function(e,t){return this.configJson.json.stages[e].apples.items[t].position},e.prototype.getBoardId=function(e){return this.configJson.json.stages[e].board.reference},e.prototype.getBoardResourceUrl=function(e){return this.configJson.json.boards[e].resource},e.prototype.getBoardRotation=function(e){return this.configJson.json.stages[e].board.rotation},e.prototype.getAllKnifesCount=function(){var e=0;for(var t in this.configJson.json.knifes)e++;return e},e.prototype.getBossNameForKnife=function(e){for(var t=1;t<=i.Constants.COUNT_TOTAL_BOSS_STAGE;t++)if(this.configJson.json.stages["stageboss"+t].reward==e)return this.configJson.json.stages["stageboss"+t].boss;return""},e.prototype.hasKnife=function(e){return null!=this.configJson.json.knifes[e]},e.prototype.hasLotteryKnife=function(){for(var t=r.default.shared.getString(i.Constants.KEY_USER_GAINED_KNIFES,i.Constants.DEFAULT_USER_KNIFE_ID).split(","),o=1;this.hasKnife(e.shared.getKnifeId(o));o++)if(e.shared.getKnifeObtainMethod(e.shared.getKnifeId(o))!=n.DEFEAT_BOSS&&-1==t.indexOf(e.shared.getKnifeId(o)))return!0;return!1},e}();o.default=a,cc._RF.pop()},{"../Constants":"Constants","./StorageUtils":"StorageUtils"}],Constants:[function(e,t,o){"use strict";cc._RF.push(t,"a6063Cf8cpGbYMtWVYy/TSg","Constants"),Object.defineProperty(o,"__esModule",{value:!0}),o.Constants={LOTTERY_PRICE:500,AD_PRICE:50,POSTION_GAME_END:"game_end",POSTION_DONE_GET_COINS:"done_get_coins",POSTION_CONTINUE:"continue",POSTION_STORE_GET_COINS:"store_get_coins",POSTION_STORE_GET_KNIFE:"store_get_knife",WATCH_AD_FOR_CONTINUE_GAME:"watch_ad_for_continue_game",WATCH_AD_FOR_CURRENCY:"watch_ad_for_currency",WATCH_AD_FOR_KNIFE:"watch_ad_for_knife",REWARD_AD_REWARDED:"rewarded",REWARD_AD_CLOSED:"closed",DEFAULT_USER_KNIFE_ID:"knife1",EVENT_ANIMATION_STOP:"stop",EVENT_ANIMATION_FINISH:"finished",EVENT_PAGE_VIEW_SCROLL:"scrolling",PREFIX_STAGE_TITLE:"STAGE ",KEY_CURRENCY:"currency",KEY_BOSS:"boss",KEY_STAGE:"stage",KEY_ENTER_PLAY_TIME:"enterPlayTime",KEY_NEXT_GIFT_TIME:"giftNextTime",KEY_BEST_SCORE:"bestScore",KEY_USER_KNIFE:"sknife",KEY_USER_GAINED_KNIFES:"gainedKnifes",KEY_SOUND_SWITCH:"SoundsSwitch",KEY_VIBRATION_SWITCH:"VibrationSwitch",KEY_LEFT_HAND_SWITCH:"LeftHandSwitch",KEY_DONE_PAGE_SHOWN:"donepageShown",TOAST_NEED_MORE_COINS:"Need More Coins",COUNT_TOTAL_BOSS_STAGE:10,COUNT_TOTAL_STAGE:50,COUNT_GIFT_APPLES:20,INTERVAL_BOSS_STAGE:5,GIFT_COUNTDOWN_TIME:12e4,A_JSON:{key1:"value1",key2:"value2"}},cc._RF.pop()},{}],ContinueComponent:[function(e,t,o){"use strict";cc._RF.push(t,"00ac9kvMq5MwZuCQKkK6uXd","ContinueComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../components/StageProgressBarComponent"),i=e("../../AppComponent"),r=e("../../utils/StorageUtils"),a=e("../../Constants"),s=e("../bridge/JSInterfaceUtils"),c=cc._decorator,d=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stageProgressBarLayoutNode=null,t.circleAnimationNode=null,t.stageLabel=null,t.scoreLabel=null,t.topScoreLabel=null,t.currencyLabel=null,t.quitButton=null,t.continueButton=null,t.countdownAudio=null,t.appNode=null,t.stage=1,t.score=0,t.watchingAd=!1,t.continueGame=!1,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;this.currencyLabel.getComponent(cc.Label).string=r.default.shared.getString(a.Constants.KEY_CURRENCY,"0"),this.stageProgressBarLayoutNode.getComponent(n.default).init(this.stage),this.stageTitle=a.Constants.PREFIX_STAGE_TITLE+this.stage,this.stageLabel.string=this.stageTitle,this.scoreLabel.string=String(this.score),this.topScoreLabel.string=String(this.score),this.scheduleOnce(function(){var e=this;this.quitButton.node.on(cc.Node.EventType.TOUCH_END,function(){cc.audioEngine.stopAllEffects(),r.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.quitButton.getComponent(cc.AudioSource).clip,!1),e.appNode.getComponent(i.default).jumpToDonePage(e.stage,e.score),s.default.logAnalyticsEvent("ThrowingMaster_Continue_Page_Clicked","operation","no_thanks")},this),this.quitButton.node.opacity=110},2),this.continueButton.node.on(cc.Node.EventType.TOUCH_END,function(){cc.audioEngine.stopAllEffects(),r.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.continueButton.getComponent(cc.AudioSource).clip,!1),s.default.watchRewardAd(a.Constants.POSTION_CONTINUE,a.Constants.WATCH_AD_FOR_CONTINUE_GAME),e.watchingAd=!0,s.default.logAnalyticsEvent("ThrowingMaster_Continue_Page_Clicked","operation","continue"),s.default.logAutopilotEvent("continue_button_click")},this),this.circleAnimationNode.getComponent(cc.Animation).on(a.Constants.EVENT_ANIMATION_STOP,function(){e.appNode.getComponent(i.default).jumpToDonePage(e.stage,e.score),cc.audioEngine.stopAllEffects()}),this.circleAnimationNode.getComponent(cc.Animation).play(),r.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.countdownAudio,!1),s.default.logAnalyticsEvent("ThrowingMaster_Continue_Page_Viewed")},t.prototype.init=function(e,t,n){o.instance=this,this.stage=e,this.stageTitle=a.Constants.PREFIX_STAGE_TITLE+e,this.score=t,this.appNode=n},t.watchAdForContinueGame=function(){o.instance.appNode.getComponent(i.default).continuePlay(),o.instance.continueGame=!0},t.isWatchingAd=function(){return o.instance&&o.instance.watchingAd},t.closeAd=function(){o.instance.watchingAd=!1},t.getContinueGame=function(){return o.instance.continueGame},t.instance=null,__decorate([u(cc.Node)],t.prototype,"stageProgressBarLayoutNode",void 0),__decorate([u(cc.Node)],t.prototype,"circleAnimationNode",void 0),__decorate([u(cc.Label)],t.prototype,"stageLabel",void 0),__decorate([u(cc.Label)],t.prototype,"scoreLabel",void 0),__decorate([u(cc.Label)],t.prototype,"topScoreLabel",void 0),__decorate([u(cc.Label)],t.prototype,"currencyLabel",void 0),__decorate([u(cc.Button)],t.prototype,"quitButton",void 0),__decorate([u(cc.Button)],t.prototype,"continueButton",void 0),__decorate([u(cc.AudioClip)],t.prototype,"countdownAudio",void 0),t=o=__decorate([d],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../AppComponent":"AppComponent","../../Constants":"Constants","../../components/StageProgressBarComponent":"StageProgressBarComponent","../../utils/StorageUtils":"StorageUtils","../bridge/JSInterfaceUtils":"JSInterfaceUtils"}],DoneComponent:[function(e,t,o){"use strict";cc._RF.push(t,"ec0de89yTNDFo4nsekwLBYw","DoneComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../AppComponent"),i=e("../../utils/StorageUtils"),r=e("../../utils/ResourceUtil"),a=e("../../Constants"),s=e("../bridge/JSInterfaceUtils"),c=e("../../components/GiftComponent"),d=cc._decorator,u=d.ccclass,l=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bestRecordBackground=null,t.coinIcon=null,t.adsOrWarehouseIcon=null,t.currencyLabel=null,t.stageLabel=null,t.scoreLabel=null,t.adsOrWarehouseLabel=null,t.adsOrWarehouseButton=null,t.restartButton=null,t.settingButton=null,t.homeButton=null,t.shopButton=null,t.giftButton=null,t.adSprite=null,t.appNode=null,t.stageTitle="STAGE 1",t.score=0,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;this.stageLabel.string=this.stageTitle,this.scoreLabel.string=String(this.score),this.currencyLabel.getComponent(cc.Label).string=i.default.shared.getString(a.Constants.KEY_CURRENCY,"0"),this.homeButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.homeButton.getComponent(cc.AudioSource).clip,!1),e.appNode.getComponent(n.default).jumpToMainPage(),s.default.logAnalyticsEvent("ThrowingMaster_Done_Icon_Clicked","which_icon","home")},this),this.shopButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.shopButton.getComponent(cc.AudioSource).clip,!1),e.appNode.getComponent(n.default).jumpToWarehousePage(),s.default.logAnalyticsEvent("ThrowingMaster_Done_Icon_Clicked","which_icon","store")},this),this.settingButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.settingButton.getComponent(cc.AudioSource).clip,!1),e.appNode.getComponent(n.default).jumpToSettingPage(),s.default.logAnalyticsEvent("ThrowingMaster_Done_Icon_Clicked","which_icon","setting")},this),this.restartButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.restartButton.getComponent(cc.AudioSource).clip,!1),e.appNode.getComponent(n.default).jumpToPlayStage(),s.default.logAnalyticsEvent("ThrowingMaster_Done_Restart_Clicked","first_button","MORE KINIVES"==e.adsOrWarehouseLabel.string?"more_knives":"free_coins"),s.default.logAutopilotEvent("play_game_click")},this);var t=i.default.shared.getInt(a.Constants.KEY_BEST_SCORE,0);t<this.score?(t=this.score,i.default.shared.putInt(a.Constants.KEY_BEST_SCORE,this.score),this.bestRecordBackground.node.opacity=255):this.bestRecordBackground.node.opacity=0,i.default.shared.getBoolean(a.Constants.KEY_DONE_PAGE_SHOWN,!1)?(this.coinIcon.node.opacity=255,this.adSprite.node.opacity=255,this.adsOrWarehouseLabel.string="FREE COINS",r.default.loadSpriteRes("done/video",function(t,o){e.adsOrWarehouseIcon.spriteFrame=o}),this.adsOrWarehouseButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.adsOrWarehouseButton.getComponent(cc.AudioSource).clip,!1),s.default.watchRewardAd(a.Constants.POSTION_DONE_GET_COINS,a.Constants.WATCH_AD_FOR_CURRENCY),s.default.logAnalyticsEvent("ThrowingMaster_Done_First_Button_Clicked","first_button","MORE KINIVES"==e.adsOrWarehouseLabel.string?"more_knives":"free_coins")},this)):(this.coinIcon.node.opacity=0,this.adSprite.node.opacity=0,this.adsOrWarehouseLabel.string="MORE KINIVES",r.default.loadSpriteRes("done/knives",function(t,o){e.adsOrWarehouseIcon.spriteFrame=o}),this.adsOrWarehouseButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.adsOrWarehouseButton.getComponent(cc.AudioSource).clip,!1),e.appNode.getComponent(n.default).jumpToWarehousePage(),s.default.logAnalyticsEvent("ThrowingMaster_Done_First_Button_Clicked","first_button","MORE KINIVES"==e.adsOrWarehouseLabel.string?"more_knives":"free_coins")},this),i.default.shared.putBoolean(a.Constants.KEY_DONE_PAGE_SHOWN,!0)),this.giftButton.node.on(cc.Node.EventType.TOUCH_END,function(){s.default.logAnalyticsEvent("ThrowingMaster_Done_Icon_Clicked","which_icon","gift")},this)},t.prototype.start=function(){o.logFlurryDonePageViewed()},t.prototype.init=function(e,t,n){this.stageTitle=a.Constants.PREFIX_STAGE_TITLE+e,this.score=t,this.appNode=n,o.instance=this},t.watchAdForCurrency=function(){if(o.instance){var e=i.default.shared.getInt(a.Constants.KEY_CURRENCY,0);e+=a.Constants.AD_PRICE,o.instance.currencyLabel.getComponent(cc.Label).string=String(e),i.default.shared.putInt(a.Constants.KEY_CURRENCY,e)}},t.logFlurryDonePageViewed=function(){s.default.logAnalyticsEvent("ThrowingMaster_Done_Page_Viewed","first_button","MORE KINIVES"==o.instance.adsOrWarehouseLabel.string?"more_knives":"free_coins","gift_status",o.instance.giftButton.getComponent(c.default).isReady()?"ready":"not_ready"),s.default.logAnalyticsEvent("ThrowingMaster_Life_Time_per_Play_Game","game_time",String(Math.ceil(((new Date).getTime()-i.default.shared.getInt(a.Constants.KEY_ENTER_PLAY_TIME))/1e3)),"game_over_stage",String(o.instance.appNode.getComponent(n.default).getCurrentStage()))},t.instance=null,__decorate([l(cc.Sprite)],t.prototype,"bestRecordBackground",void 0),__decorate([l(cc.Sprite)],t.prototype,"coinIcon",void 0),__decorate([l(cc.Sprite)],t.prototype,"adsOrWarehouseIcon",void 0),__decorate([l(cc.Label)],t.prototype,"currencyLabel",void 0),__decorate([l(cc.Label)],t.prototype,"stageLabel",void 0),__decorate([l(cc.Label)],t.prototype,"scoreLabel",void 0),__decorate([l(cc.Label)],t.prototype,"adsOrWarehouseLabel",void 0),__decorate([l(cc.Button)],t.prototype,"adsOrWarehouseButton",void 0),__decorate([l(cc.Button)],t.prototype,"restartButton",void 0),__decorate([l(cc.Button)],t.prototype,"settingButton",void 0),__decorate([l(cc.Button)],t.prototype,"homeButton",void 0),__decorate([l(cc.Button)],t.prototype,"shopButton",void 0),__decorate([l(cc.Button)],t.prototype,"giftButton",void 0),__decorate([l(cc.Sprite)],t.prototype,"adSprite",void 0),t=o=__decorate([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../AppComponent":"AppComponent","../../Constants":"Constants","../../components/GiftComponent":"GiftComponent","../../utils/ResourceUtil":"ResourceUtil","../../utils/StorageUtils":"StorageUtils","../bridge/JSInterfaceUtils":"JSInterfaceUtils"}],FallingControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"9f1625edkBGna+t92vG0V41","FallingControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=cc._decorator,r=i.ccclass,a=i.property;(function(e){e[e.LEFT=1]="LEFT",e[e.RIGHT=0]="RIGHT"})(n=o.Direction||(o.Direction={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t.verticalAccelerate=3e3,t.horizentalAccelerate=0,t.lastPos=new cc.Vec2(0,0),t.speed=800,t.speedAngle=0,t.direction=n.RIGHT,t}return __extends(t,e),t.prototype.onLoad=function(){cc.log("FallingControlComponent onLoad")},t.prototype.start=function(){},t.prototype.update=function(e){if(this.node){var t=new cc.Vec2(0,0);t.x=this.speed*Math.cos(this.speedAngle/360*2*Math.PI)*e+this.lastPos.x,t.y=this.speed*Math.sin(this.speedAngle/360*2*Math.PI)*e+this.lastPos.y,this.node.setPosition(t),this.lastPos=t,this.speedAngle=Math.atan((this.speed*Math.sin(this.speedAngle/360*2*Math.PI)-Number(this.verticalAccelerate)*e)/(this.speed*Math.cos(this.speedAngle/360*2*Math.PI)+Number(this.horizentalAccelerate)*e))/2/Math.PI*360+180*this.direction,this.speed=Math.sqrt((this.speed*Math.cos(this.speedAngle/360*2*Math.PI)+Number(this.horizentalAccelerate)*e)*(this.speed*Math.cos(this.speedAngle/360*2*Math.PI)+Number(this.horizentalAccelerate)*e)+(this.speed*Math.sin(this.speedAngle/360*2*Math.PI)-Number(this.verticalAccelerate)*e)*(this.speed*Math.sin(this.speedAngle/360*2*Math.PI)-Number(this.verticalAccelerate)*e))}},t.prototype.split=function(e,t){if(this.speedAngle=e,this.direction=t,this.speed=800,this.lastPos=new cc.Vec2(0,0),0==this.node.childrenCount){var o=cc.instantiate(this.prefab);this.node.addChild(o)}},__decorate([a(cc.Prefab)],t.prototype,"prefab",void 0),__decorate([a(Number)],t.prototype,"verticalAccelerate",void 0),__decorate([a(Number)],t.prototype,"horizentalAccelerate",void 0),t=__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],GiftComponent:[function(e,t,o){"use strict";cc._RF.push(t,"bb633EdaAJEwaGL8zdkySw5","GiftComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/StorageUtils"),i=e("../Constants"),r=e("../components/ApplePartsControlComponent"),a=cc._decorator,s=a.ccclass,c=a.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.giftMask=null,t.applePartsPrefab=null,t.timerLabel=null,t.currencyLabel=null,t.giftOpenAudio=null,t.giftApples=[],t.giftCountDown=i.Constants.GIFT_COUNTDOWN_TIME,t.isMaskShow=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;cc.log("GiftComponent onLoad"),this.updateGiftCountdown(),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.giftCountDown<=0&&e.openGift(50+Math.floor(10*Math.random()))},this)},t.prototype.start=function(){},t.prototype.update=function(e){this.updateGiftCountdown()},t.prototype.transNumberToString=function(e){return e<10?"0"+e:String(e)},t.prototype.openGift=function(e){var t=this;n.default.shared.getBoolean(i.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.giftOpenAudio,!1),n.default.shared.putInt(i.Constants.KEY_NEXT_GIFT_TIME,(new Date).getTime()+i.Constants.GIFT_COUNTDOWN_TIME),n.default.shared.putInt(i.Constants.KEY_CURRENCY,n.default.shared.getInt(i.Constants.KEY_CURRENCY,0)+e),this.currencyLabel.getComponent(cc.Label).string=n.default.shared.getString(i.Constants.KEY_CURRENCY,"0"),this.isMaskShow=!0,this.giftMask.opacity=200,this.giftMask.getChildByName("gift_coin_count_container").getChildByName("gift_coin_count").getComponent(cc.Label).string="+"+String(e);for(var o=0;o<i.Constants.COUNT_GIFT_APPLES;o++){var a=cc.instantiate(this.applePartsPrefab);a.setPosition(new cc.Vec2(400*Math.random()*(Math.random()>.5?1:-1)+100,400*Math.random()-100)),this.giftMask.addChild(a),a.getComponent(r.default).split(),this.giftApples.push(a),this.giftCountDown=i.Constants.GIFT_COUNTDOWN_TIME}this.giftMask.on(cc.Node.EventType.TOUCH_END,function(){t.closeGiftMask()},this),this.scheduleOnce(function(){t.closeGiftMask()},2)},t.prototype.updateGiftCountdown=function(){var e=n.default.shared.getInt(i.Constants.KEY_NEXT_GIFT_TIME,0);this.giftCountDown=e-(new Date).getTime(),this.giftCountDown=Math.max(this.giftCountDown,0),this.giftCountDown=Math.min(this.giftCountDown,i.Constants.GIFT_COUNTDOWN_TIME),0==e&&(n.default.shared.putInt(i.Constants.KEY_NEXT_GIFT_TIME,(new Date).getTime()),this.giftCountDown=0),this.giftCountDown<=0?this.timerLabel.string="FREE GIFT":this.timerLabel.getComponent(cc.Label).string=this.transNumberToString(Math.floor(this.giftCountDown/60/1e3/60))+":"+this.transNumberToString(Math.floor(this.giftCountDown%36e5/60/1e3))+":"+this.transNumberToString(Math.floor(this.giftCountDown%6e4/1e3))},t.prototype.isReady=function(){return this.giftCountDown<=0},t.prototype.closeGiftMask=function(){if(this.isMaskShow){for(var e=0;e<this.giftApples.length;e++)this.node.removeChild(this.giftApples[e]);this.giftMask.opacity=0,this.isMaskShow=!1,this.giftMask.off(cc.Node.EventType.TOUCH_END)}},__decorate([c(cc.Node)],t.prototype,"giftMask",void 0),__decorate([c(cc.Prefab)],t.prototype,"applePartsPrefab",void 0),__decorate([c(cc.Label)],t.prototype,"timerLabel",void 0),__decorate([c(cc.Label)],t.prototype,"currencyLabel",void 0),__decorate([c(cc.AudioClip)],t.prototype,"giftOpenAudio",void 0),t=__decorate([s],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../Constants":"Constants","../components/ApplePartsControlComponent":"ApplePartsControlComponent","../utils/StorageUtils":"StorageUtils"}],JSInterfaceUtils:[function(e,t,o){"use strict";cc._RF.push(t,"39252I89HRCXLXa6daFoXk4","JSInterfaceUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../done/ContinueComponent"),i=function(){function e(){}return e.logAnalyticsEvent=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(window.android&&window.android.logAnalyticsEvent)try{return window.android.logAnalyticsEvent(e,t),void cc.log("logAnalyticsEvent")}catch(e){cc.error("logAnalyticsEvent error = "+e.name,e.message)}else cc.warn("windoe.android.logAnalyticsEvent method not found")},e.logAutopilotEvent=function(e){if(window.android&&window.android.logAutopilotEvent)try{return window.android.logAutopilotEvent(e),void cc.log("logAutopilotEvent")}catch(e){cc.error("logAutopilotEvent error = "+e.name,e.message)}else cc.warn("windoe.android.logAutopilotEvent method not found")},e.optIntegerConfig=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(window.android&&window.android.optIntegerConfig)try{var n=window.android.optIntegerConfig(e,t);return cc.log("optIntegerConfig, result = "+n),n}catch(e){cc.error("optIntegerConfig error = "+e.name,e.message)}else cc.warn("windoe.android.optIntegerConfig method not found");return e},e.optBooleanConfig=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(window.android&&window.android.optBooleanConfig)try{var n=window.android.optBooleanConfig(e,t);return cc.log("optBooleanConfig, result = "+n),n}catch(e){cc.error("optBooleanConfig error = "+e.name,e.message)}else cc.warn("windoe.android.optBooleanConfig method not found");return e},e.optFloatConfig=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(window.android&&window.android.optFloatConfig)try{var n=window.android.optFloatConfig(e,t);return cc.log("optFloatConfig, result = "+n),n}catch(e){cc.error("optFloatConfig error = "+e)}else cc.warn("windoe.android.optFloatConfig method not found");return e},e.vibrate=function(e){if(window.android&&window.android.vibrate)try{var t=window.android.vibrate(e);return cc.log("vibrate, result = "+t+": "+typeof t),t}catch(e){cc.error("vibrate error = "+e)}else cc.warn("windoe.android.vibrate method not found");return!1},e.addShortcut=function(){if(window.android&&window.android.addShortcut)try{return void window.android.addShortcut()}catch(e){cc.error("addShortcut error = "+e)}else cc.warn("windoe.android.addShortcut method not found")},e.hasRewardAd=function(){if(window.android&&window.android.hasRewardAd)try{var e=window.android.hasRewardAd();return cc.log("hasRewardAd, result = "+e),e}catch(e){cc.error("hasRewardAd error = "+e)}else cc.warn("windoe.android.hasRewardAd method not found");return!1},e.watchRewardAd=function(t,o){if(e.logAnalyticsEvent("ThrowingMaster_RewardVideo_Ads_Should_Show","position",t),window.android&&window.android.watchRewardAd)try{var n=window.android.watchRewardAd(t,o);return cc.log("watchRewardAd, result = "+n+": "+typeof n),n}catch(e){cc.error("watchRewardAd error = "+e)}else cc.warn("window.android.watchRewardAd method not found");return!1},e.watchInterstitialAd=function(t,o){if(n.default.isWatchingAd())return!1;if(e.logAnalyticsEvent("ThrowingMaster_Interstitial_Ads_Should_Show","position",t),window.android&&window.android.watchInterstitialAd)try{var i=window.android.watchInterstitialAd(t,o);return cc.log("watchInterstitialAd, result = "+i+": "+typeof i),i}catch(e){cc.error("watchInterstitialAd error = "+e)}else cc.warn("window.android.watchInterstitialAd method not found");return!1},e.showToast=function(e){if(window.android&&window.android.showToast)try{var t=window.android.showToast(e);return cc.log("showToast, result = "+t),t}catch(e){cc.error("showToast error = "+e)}else cc.warn("windoe.android.showToast method not found");return!1},e}();o.default=i,cc.log(window.android),cc._RF.pop()},{"../done/ContinueComponent":"ContinueComponent"}],KnifeControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"f92d7BOY+JNx6T+bWoWEFR1","KnifeControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./BoardControlComponent"),r=e("./PlayStageControlComponent"),a=e("../../utils/ResourceUtil"),s=e("../bridge/JSInterfaceUtils"),c=e("../../utils/StorageUtils"),d=e("../../Constants"),u=cc._decorator,l=u.ccclass,f=u.property;(function(e){e[e.STATE_HIDDEN=0]="STATE_HIDDEN",e[e.STATE_READYING=1]="STATE_READYING",e[e.STATE_READY=2]="STATE_READY",e[e.STATE_FLYING=3]="STATE_FLYING",e[e.STATE_INSERTING=4]="STATE_INSERTING",e[e.STATE_INSERTED=5]="STATE_INSERTED",e[e.STATE_BOUNCE_BACK=6]="STATE_BOUNCE_BACK",e[e.STATE_ROTATING=7]="STATE_ROTATING",e[e.STATE_FALLING=8]="STATE_FALLING"})(n||(n={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.knifeHitAudio=null,t.stageNode=null,t.boardContainerNode=null,t.knifeRealLength=355,t.knifeInsertLength=170,t.state=n.STATE_HIDDEN,t.remainFlyingDistance=0,t.remainDeltaOpacity=0,t.flyingSpeed=1200,t.currentGoAheadDistance=0,t.bounceAngle=0,t.rotateTime=0,t.totalRotateTime=.2,t.throwable=!1,t.isLastKnife=!1,t.hasAddedToBoardNode=!1,t.firstFrameOfInserted=!0,t}var o;return __extends(t,e),o=t,t.prototype.reset=function(){this.state=n.STATE_HIDDEN,this.remainFlyingDistance=0,this.remainDeltaOpacity=0,this.flyingSpeed=1500,this.currentGoAheadDistance=0,this.bounceAngle=0,this.rotateTime=0,this.totalRotateTime=.2,this.throwable=!1,this.isLastKnife=!1,this.hasAddedToBoardNode=!1,this.firstFrameOfInserted=!0,this.node.rotation=0,this.node.setAnchorPoint(.5,0),this.node.removeFromParent()},t.prototype.onLoad=function(){cc.log("KnifeControlComponent onLoad")},t.prototype.start=function(){},t.prototype.update=function(e){if(this.remainDeltaOpacity>1e-6){var t=1062.5*e;t>this.remainDeltaOpacity&&(t=this.remainDeltaOpacity),this.node.opacity+=t,this.remainDeltaOpacity-=t}switch(this.state){case n.STATE_HIDDEN:break;case n.STATE_READYING:(o=100/.24*e)>this.remainFlyingDistance&&(o=this.remainFlyingDistance),this.goAhead(o),this.remainFlyingDistance-=o,this.node.opacity>100&&(this.throwable=!0),this.remainFlyingDistance<1e-6&&(this.state=n.STATE_READY);break;case n.STATE_READY:break;case n.STATE_FLYING:var o=Math.min(this.flyingSpeed*e,this.remainFlyingDistance+this.knifeInsertLength);this.goAhead(o),this.remainFlyingDistance-=o,this.remainFlyingDistance<1e-6&&(this.remainFlyingDistance+=this.knifeInsertLength,this.state=n.STATE_INSERTING);break;case n.STATE_INSERTING:this.hasAddedToBoardNode||(this.insertIntoBoard(),this.hasAddedToBoardNode=!0);var i=this.flyingSpeed*e;i>this.remainFlyingDistance&&(i=this.remainFlyingDistance),this.goAhead(i),this.remainFlyingDistance-=i,this.remainFlyingDistance<1e-6&&(this.state=n.STATE_INSERTED);break;case n.STATE_INSERTED:this.firstFrameOfInserted&&(this.stageNode.getComponent(r.default).onKnifeInserted(),this.isLastKnife&&this.stageNode.getComponent(r.default).onStageFinished(),this.firstFrameOfInserted=!1);break;case n.STATE_BOUNCE_BACK:if(this.hasAddedToBoardNode){var a=this.stageNode.getComponent(r.default).backgroundNode,s=this.node.parent.convertToWorldSpaceAR(this.node.position);this.node.removeFromParent(),a.addChild(this.node,-1),this.node.setPosition(this.node.parent.convertToNodeSpaceAR(s)),this.hasAddedToBoardNode=!1}this.node.group="default",this.node.setAnchorPoint(.5,.5);var c=this.stageNode.getChildByName(r.NODE_NAME_BACKGROUND).convertToWorldSpaceAR(new cc.Vec2(this.node.getPositionX(),this.node.getPositionY())),d=this.stageNode.getChildByName(r.NODE_NAME_BACKGROUND).convertToNodeSpaceAR(new cc.Vec2(c.x+this.flyingSpeed*Math.cos(this.bounceAngle/360*2*Math.PI)*e,c.y-this.flyingSpeed*Math.sin(this.bounceAngle/360*2*Math.PI)*e));this.node.setPosition(d),this.node.rotation=this.node.rotation+3e3*Math.random()*e,this.node.getPositionY()<-1500&&(this.state=n.STATE_HIDDEN,this.stageNode.getComponent(r.default).onStageFailed());break;case n.STATE_ROTATING:this.node.rotation+=(100*Math.random()+400)*e,this.rotateTime+=e,this.rotateTime>=this.totalRotateTime&&(this.state=n.STATE_FALLING);break;case n.STATE_FALLING:this.node.rotation+=500*e,this.node.setPositionY(this.node.getPositionY()-3e3*e),this.node.getPositionY()<-1500&&(this.state=n.STATE_HIDDEN,this.stageNode.getComponent(r.default).onKnifeFall())}},t.prototype.setLastKnife=function(e){this.isLastKnife=e},t.prototype.ready=function(){cc.log("ready, position =",this.node.position.toString()),this.state==n.STATE_HIDDEN&&(this.state=n.STATE_READYING,this.remainDeltaOpacity=255,this.remainFlyingDistance=100)},t.prototype.startFalling=function(){this.state=n.STATE_ROTATING,this.node.setAnchorPoint(.5,.5),this.node.setPositionX(this.node.getPositionX()+500*(Math.random()-.5)),this.node.setPositionY(this.node.getPositionY()+500*(Math.random()-.5))},t.prototype.addToBoard=function(e,t){var o=this;a.default.loadSpriteRes(e,function(e,t){o.node.getComponent(cc.Sprite).spriteFrame=t}),this.node.group="knife",this.boardContainerNode.addChild(this.node,-1);var n=this.boardContainerNode.getChildByName(i.NODE_NAME_BOARD).width/2+(this.knifeRealLength-this.knifeInsertLength);this.node.position=new cc.Vec2(n*Math.sin(t/360*2*Math.PI),-n*Math.cos(t/360*2*Math.PI)),this.node.rotation=-t},t.prototype.throw=function(e){return!(!this.throwable||this.state==n.STATE_HIDDEN)&&(this.throwable=!1,this.state=n.STATE_FLYING,this.remainFlyingDistance=e-this.node.position.y,this.flyingSpeed=Math.max(1e3,this.remainFlyingDistance/.08),this.node.group="knife",!0)},t.prototype.goAhead=function(e){if(this.currentGoAheadDistance=e,Math.abs(this.node.rotation)<1e-6)this.node.setPosition(this.node.position.x,this.node.position.y+e);else{var t=e*Math.sin(this.node.rotation*Math.PI/180),o=e*Math.cos(this.node.rotation*Math.PI/180);this.node.setPosition(this.node.position.x+t,this.node.position.y+o)}},t.prototype.goBack=function(e){if(Math.abs(this.node.rotation)<1e-6)this.node.setPosition(this.node.position.x,this.node.position.y-e);else{var t=e*Math.sin(this.node.rotation*Math.PI/180),o=e*Math.cos(this.node.rotation*Math.PI/180);this.node.setPosition(this.node.position.x-t,this.node.position.y-o)}},t.prototype.insertIntoBoard=function(){if(this.boardContainerNode){var e=this.node.parent.convertToWorldSpaceAR(this.node.position);this.node.removeFromParent(),this.boardContainerNode.addChild(this.node,-1),this.node.rotation=-this.boardContainerNode.rotation,this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))}},t.prototype.onCollisionEnter=function(e,t){if(t.node.getComponent(o).state!=n.STATE_INSERTED&&!(1==e.tag&&1==t.tag||3==e.tag&&1==t.tag||1!=t.tag)){this.node.group="default",this.state=n.STATE_BOUNCE_BACK,this.remainFlyingDistance=2e3,this.flyingSpeed=3e3,c.default.shared.getBoolean(d.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.knifeHitAudio,!1),c.default.shared.getBoolean(d.Constants.KEY_VIBRATION_SWITCH,!0)&&s.default.vibrate(300.1);var r=new cc.Vec2(e.node.getPositionX(),e.node.getPositionY());r=this.boardContainerNode.convertToWorldSpaceAR(r);var a=this.stageNode.convertToWorldSpaceAR(this.boardContainerNode.getPosition()),u=Math.atan((r.x-a.x)/(r.y-a.y)*360/2/Math.PI);this.bounceAngle=90-10*u,this.boardContainerNode.getComponent(i.default).stopRotation()}},__decorate([f(cc.AudioClip)],t.prototype,"knifeHitAudio",void 0),t=o=__decorate([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Constants":"Constants","../../utils/ResourceUtil":"ResourceUtil","../../utils/StorageUtils":"StorageUtils","../bridge/JSInterfaceUtils":"JSInterfaceUtils","./BoardControlComponent":"BoardControlComponent","./PlayStageControlComponent":"PlayStageControlComponent"}],KnifeWarehouseComponent:[function(e,t,o){"use strict";cc._RF.push(t,"103b75u2C5AJ4k3ZAQZlVJ8","KnifeWarehouseComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./KnifeWarehousePageViewComponent"),i=e("./LotteryComponent"),r=e("../../AppComponent"),a=e("./RewardComponent"),s=e("../../utils/StorageUtils"),c=e("../../Constants"),d=e("../bridge/JSInterfaceUtils"),u=e("../../utils/ConfigUtil"),l=cc._decorator,f=l.ccclass,p=l.property,h="equip_label",g="unlock_label",_="equip_video_icon",C="coins",y="more_label",m="line",N="ad_image",S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageView=null,t.defeatBossLayout=null,t.lotteyPrefab=null,t.rewardPrefab=null,t.previewSprite=null,t.background=null,t.knifeCntLabel=null,t.currencyLabel=null,t.lotteryButton=null,t.equipButton=null,t.backButton=null,t.watchAdForCurrencyButton=null,t.watchAdForCurrencyNoLotteryButton=null,t.getKnifeAudio=null,t.lotteryComponent=null,t.knifeWarehousePageViewComponent=null,t.appNode=null,t.lotteryNode=null,t.chooseKnife=function(e){s.default.shared.getBoolean(c.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.equipButton.getComponent(cc.AudioSource).clip,!1);var o=t.knifeWarehousePageViewComponent.getCurrentKnifeId(),n=s.default.shared.getString(c.Constants.KEY_USER_GAINED_KNIFES,c.Constants.DEFAULT_USER_KNIFE_ID).split(",");if(o==c.Constants.DEFAULT_USER_KNIFE_ID||-1!=n.indexOf(o))s.default.shared.putString(c.Constants.KEY_USER_KNIFE,o),t.appNode.getComponent(r.default).jumpToPlayStage(),d.default.logAutopilotEvent("play_game_click"),d.default.logAnalyticsEvent("ThrowingMaster_Store_Play_Game_Clicked");else if(u.default.shared.getKnifeObtainMethod(o)==u.KnifeObtainMethod.BUY){var i=s.default.shared.getInt(c.Constants.KEY_CURRENCY,0);i>=u.default.shared.getKnifePrice(o)?(i-=u.default.shared.getKnifePrice(o),t.currencyLabel.getComponent(cc.Label).string=String(i),s.default.shared.putInt(c.Constants.KEY_CURRENCY,i),s.default.shared.putString(c.Constants.KEY_USER_KNIFE,o),n.push(o),s.default.shared.putString(c.Constants.KEY_USER_GAINED_KNIFES,String(n)),t.knifeCntLabel.getComponent(cc.Label).string=n.length+"/"+u.default.shared.getAllKnifesCount(),t.updateEquipButtonStatus(u.default.shared.getIndexFromKnifeId(o)),s.default.shared.getBoolean(c.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.getKnifeAudio,!1),t.updateLottryButtonState(),d.default.logAnalyticsEvent("ThrowingMaster_Knives_Unlock","method","coins","which_knives",o)):d.default.showToast(c.Constants.TOAST_NEED_MORE_COINS)}else u.default.shared.getKnifeObtainMethod(o)==u.KnifeObtainMethod.REWARD_ADS&&(d.default.watchRewardAd(c.Constants.POSTION_STORE_GET_KNIFE,c.Constants.WATCH_AD_FOR_KNIFE+u.default.shared.getIndexFromKnifeId(o)),t.updateLottryButtonState())},t.showLottery=function(e){s.default.shared.getBoolean(c.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.lotteryButton.getComponent(cc.AudioSource).clip,!1);var o=s.default.shared.getInt(c.Constants.KEY_CURRENCY,0);o<c.Constants.LOTTERY_PRICE?d.default.showToast(c.Constants.TOAST_NEED_MORE_COINS):(o-=c.Constants.LOTTERY_PRICE,t.currencyLabel.getComponent(cc.Label).string=String(o),s.default.shared.putInt(c.Constants.KEY_CURRENCY,o),t.lotteryNode=cc.instantiate(t.lotteyPrefab),t.lotteryComponent=t.lotteryNode.getComponentInChildren(i.default),t.lotteryComponent.init(t.lotteryCallback),t.background.node.addChild(t.lotteryNode))},t.lotteryCallback=function(){t.scheduleOnce(function(){var e=this,t=this.lotteryComponent.getKnifeIndex(),o=s.default.shared.getString(c.Constants.KEY_USER_GAINED_KNIFES,c.Constants.DEFAULT_USER_KNIFE_ID).split(",");-1==o.indexOf(u.default.shared.getKnifeId(t))&&(o.push(u.default.shared.getKnifeId(t)),s.default.shared.putString(c.Constants.KEY_USER_GAINED_KNIFES,String(o)));var n=cc.instantiate(this.rewardPrefab);n.getComponent(a.default).init(t,function(){e.updateEquipButtonStatus(t)}),this.lotteryNode.removeFromParent(),this.background.node.addChild(n),this.knifeWarehousePageViewComponent.scrollToKnife(t),this.updateEquipButtonStatus(t),this.knifeCntLabel.getComponent(cc.Label).string=o.length+"/"+u.default.shared.getAllKnifesCount(),s.default.shared.getBoolean(c.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.getKnifeAudio,!1),this.appNode.getComponent(r.default).addUnlockKnifeCount(),d.default.logAnalyticsEvent("ThrowingMaster_Knives_Unlock","method","random","which_knives",u.default.shared.getKnifeId(t))},1),t.updateLottryButtonState()},t.updateEquipButtonStatus=function(e){var o=function(){t.equipButton.node.opacity=255,t.defeatBossLayout.node.opacity=0},n=function(){t.equipButton.node.getChildByName(g).opacity=255,t.equipButton.node.getChildByName(y).opacity=255,t.equipButton.node.getChildByName(m).opacity=255,t.equipButton.node.getChildByName(h).opacity=0},i=e==u.default.shared.getIndexFromKnifeId(c.Constants.DEFAULT_USER_KNIFE_ID)||-1!=s.default.shared.getString(c.Constants.KEY_USER_GAINED_KNIFES,c.Constants.DEFAULT_USER_KNIFE_ID).split(",").indexOf(u.default.shared.getKnifeId(e)),r=u.default.shared.getKnifeObtainMethod(u.default.shared.getKnifeId(e)),a=u.default.shared.getIndexFromKnifeId(s.default.shared.getString(c.Constants.KEY_USER_KNIFE,c.Constants.DEFAULT_USER_KNIFE_ID));if(i)return o(),t.equipButton.node.getChildByName(h).opacity=255,t.equipButton.node.getChildByName(h).getComponent(cc.Label).string=a==e?"CURRENT":"EQUIP",t.equipButton.node.getChildByName(g).opacity=0,t.equipButton.node.getChildByName(y).opacity=0,t.equipButton.node.getChildByName(m).opacity=0,t.equipButton.node.getChildByName(C).opacity=0,t.equipButton.node.getChildByName(_).opacity=0,void(t.equipButton.node.getChildByName(N).opacity=0);switch(r){case u.KnifeObtainMethod.BUY:o(),n(),t.equipButton.node.getChildByName(y).color=new cc.Color(255,238,100,255),t.equipButton.node.getChildByName(y).getComponent(cc.Label).string=String(u.default.shared.getKnifePrice(u.default.shared.getKnifeId(e))),t.equipButton.node.getChildByName(g).getComponent(cc.Label).string="UNLOCK",t.equipButton.node.getChildByName(_).opacity=0,t.equipButton.node.getChildByName(N).opacity=0,t.equipButton.node.getChildByName(C).opacity=255,t.equipButton.node.getChildByName(m).opacity=100;break;case u.KnifeObtainMethod.REWARD_ADS:o(),n(),t.equipButton.node.getChildByName(y).color=new cc.Color(30,93,17,255);var d=s.default.shared.getInt(c.Constants.WATCH_AD_FOR_KNIFE+e,0);t.equipButton.node.getChildByName(y).getComponent(cc.Label).string=d+"/"+u.default.shared.getKnifePrice(u.default.shared.getKnifeId(e)),t.equipButton.node.getChildByName(g).getComponent(cc.Label).string="WATCH\nVIDEO",t.equipButton.node.getChildByName(_).opacity=255,t.equipButton.node.getChildByName(N).opacity=255,t.equipButton.node.getChildByName(C).opacity=0,t.equipButton.node.getChildByName(m).opacity=100;break;case u.KnifeObtainMethod.DEFEAT_BOSS:t.equipButton.node.opacity=0,t.defeatBossLayout.node.opacity=255,t.defeatBossLayout.node.getChildByName("boss_label").getComponent(cc.Label).string="BOSS "+u.default.shared.getBossNameForKnife(u.default.shared.getKnifeId(e))}},t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;this.equipButton.node.on(cc.Node.EventType.TOUCH_END,this.chooseKnife),this.backButton.node.on(cc.Node.EventType.TOUCH_END,function(){s.default.shared.getBoolean(c.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.backButton.getComponent(cc.AudioSource).clip,!1),e.node.removeFromParent(),e.appNode.getComponent(r.default).updateMainPageKnife()},this),this.knifeWarehousePageViewComponent=this.pageView.getComponent(n.default),this.currencyLabel.getComponent(cc.Label).string=s.default.shared.getString(c.Constants.KEY_CURRENCY,"0");var t=s.default.shared.getString(c.Constants.KEY_USER_GAINED_KNIFES,c.Constants.DEFAULT_USER_KNIFE_ID).split(",");this.knifeCntLabel.getComponent(cc.Label).string=t.length+"/"+u.default.shared.getAllKnifesCount(),this.updateLottryButtonState(),d.default.logAnalyticsEvent("ThrowingMaster_Store_Page_Viewed"),this.pageView.node.getComponent(n.default).init(this.updateEquipButtonStatus)},t.prototype.init=function(e){o.instance=this,this.appNode=e},t.watchAdForCurrency=function(){if(null!=o.instance){var e=s.default.shared.getInt(c.Constants.KEY_CURRENCY,0);e+=c.Constants.AD_PRICE,o.instance.currencyLabel.getComponent(cc.Label).string=String(e),s.default.shared.putInt(c.Constants.KEY_CURRENCY,e)}},t.watchAdForKnife=function(e){if(null!=o.instance){var t=s.default.shared.getInt(e,0);t++,s.default.shared.putInt(e,t);var n=u.default.shared.getIndexFromAdResult(e),i=u.default.shared.getKnifeId(n);if(t>=u.default.shared.getKnifePrice(i)){var r=s.default.shared.getString(c.Constants.KEY_USER_GAINED_KNIFES,c.Constants.DEFAULT_USER_KNIFE_ID).split(",");r.push(i),s.default.shared.putString(c.Constants.KEY_USER_KNIFE,i),s.default.shared.putString(c.Constants.KEY_USER_GAINED_KNIFES,String(r)),d.default.logAnalyticsEvent("ThrowingMaster_Knives_Unlock","method","videos","which_knives",i)}o.instance.knifeWarehousePageViewComponent.scrollToKnife(n),o.instance.updateEquipButtonStatus(n)}},t.prototype.updateLottryButtonState=function(){var e=this;if(u.default.shared.hasLotteryKnife())return this.watchAdForCurrencyButton.node.on(cc.Node.EventType.TOUCH_END,function(){s.default.shared.getBoolean(c.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.watchAdForCurrencyButton.getComponent(cc.AudioSource).clip,!1),d.default.watchRewardAd(c.Constants.POSTION_STORE_GET_COINS,c.Constants.WATCH_AD_FOR_CURRENCY),d.default.logAnalyticsEvent("ThrowingMaster_Store_Get_Coins_Clicked")},this),this.lotteryButton.node.on(cc.Node.EventType.TOUCH_END,this.showLottery),void(this.watchAdForCurrencyNoLotteryButton.node.opacity=0);this.watchAdForCurrencyButton.node.removeFromParent(),this.lotteryButton.node.removeFromParent(),this.watchAdForCurrencyNoLotteryButton.node.opacity=255,this.watchAdForCurrencyNoLotteryButton.node.on(cc.Node.EventType.TOUCH_END,function(){s.default.shared.getBoolean(c.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.watchAdForCurrencyButton.getComponent(cc.AudioSource).clip,!1),d.default.watchRewardAd(c.Constants.POSTION_STORE_GET_COINS,c.Constants.WATCH_AD_FOR_CURRENCY),d.default.logAnalyticsEvent("ThrowingMaster_Store_Get_Coins_Clicked")},this)},t.instance=null,__decorate([p(cc.PageView)],t.prototype,"pageView",void 0),__decorate([p(cc.Layout)],t.prototype,"defeatBossLayout",void 0),__decorate([p(cc.Prefab)],t.prototype,"lotteyPrefab",void 0),__decorate([p(cc.Prefab)],t.prototype,"rewardPrefab",void 0),__decorate([p(cc.Sprite)],t.prototype,"previewSprite",void 0),__decorate([p(cc.Sprite)],t.prototype,"background",void 0),__decorate([p(cc.Label)],t.prototype,"knifeCntLabel",void 0),__decorate([p(cc.Label)],t.prototype,"currencyLabel",void 0),__decorate([p(cc.Button)],t.prototype,"lotteryButton",void 0),__decorate([p(cc.Button)],t.prototype,"equipButton",void 0),__decorate([p(cc.Button)],t.prototype,"backButton",void 0),__decorate([p(cc.Button)],t.prototype,"watchAdForCurrencyButton",void 0),__decorate([p(cc.Button)],t.prototype,"watchAdForCurrencyNoLotteryButton",void 0),__decorate([p(cc.AudioClip)],t.prototype,"getKnifeAudio",void 0),t=o=__decorate([f],t)}(cc.Component);o.default=S,cc._RF.pop()},{"../../AppComponent":"AppComponent","../../Constants":"Constants","../../utils/ConfigUtil":"ConfigUtil","../../utils/StorageUtils":"StorageUtils","../bridge/JSInterfaceUtils":"JSInterfaceUtils","./KnifeWarehousePageViewComponent":"KnifeWarehousePageViewComponent","./LotteryComponent":"LotteryComponent","./RewardComponent":"RewardComponent"}],KnifeWarehousePageViewComponent:[function(e,t,o){"use strict";cc._RF.push(t,"f3c19j+oGtBV4HOC1+NNCeN","KnifeWarehousePageViewComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../utils/ResourceUtil"),i=e("../../utils/StorageUtils"),r=e("../../Constants"),a=e("../../utils/ConfigUtil"),s=cc._decorator,c=s.ccclass,d=s.property;o.COUNT_KNIFES_ONE_PAGE=7;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageView=null,t.defeatBossLayout=null,t.preview=null,t.equipButton=null,t.chooseKnifeAudio=null,t.pageIndex=0,t.offsetXToCenter=0,t.touchStartPositionX=0,t.hasScrolledToUserKnife=!1,t.onScroll=function(e){for(var o=t.pageView.getScrollOffset().x,i=(t.pageView.node.getChildByName("view").getChildByName("content").getComponent(cc.Layout).spacingX+t.pageView.getPages()[0].width)/2,r=0;r<t.pageView.getPages().length;r++){var s=t.pageView.getPages()[r];Math.abs(s.x+o-t.offsetXToCenter)<i&&t.pageIndex!=r&&(t.changePageIndex(r),t.updateEquipButtonStatus(r))}n.default.loadSpriteRes(a.default.shared.getKnifeResourceUrl(a.default.shared.getKnifeId(t.pageIndex)),function(e,o){t.previewSprite.spriteFrame=o})},t.onTouchStart=function(e){i.default.shared.getBoolean(r.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.chooseKnifeAudio,!1),t.touchStartPositionX=e.touch.getLocationX()},t.onTouchEnd=function(e){if(Math.abs(e.touch.getLocationX()-t.touchStartPositionX)>1e-4)t.scrollToKnife(t.pageIndex);else{var o=cc.view.getVisibleSize(),n=(t.pageView.node.getChildByName("view").getChildByName("content").getComponent(cc.Layout).spacingX+t.pageView.getPages()[0].width)/2;e.touch.getLocationX()>o.width/2+n?t.scrollToKnife(t.pageIndex+1,.1):e.touch.getLocationX()<o.width/2-n?t.scrollToKnife(t.pageIndex-1,.1):t.scrollToKnife(t.pageIndex,0)}},t.scrollToKnife=function(e,o){null!=e&&t.changePageIndex(e);var n=new cc.Vec2(0,0);n.x=t.pageView.getPages()[t.pageIndex].getPositionX()-t.offsetXToCenter,t.pageView.scrollToOffset(n,null==o?.3:o)},t}return __extends(t,e),t.prototype.onLoad=function(){for(var e=this,t=function(e){var t=cc.instantiate(o.pageView.getPages()[0]),i=t.getComponent(cc.Sprite);n.default.loadSpriteRes(a.default.shared.getKnifeResourceUrl(a.default.shared.getKnifeId(e)),function(e,t){i.spriteFrame=t}),o.pageView.addPage(t)},o=this,s=1;a.default.shared.hasKnife(a.default.shared.getKnifeId(s));s++)t(s);this.pageView.node.on(r.Constants.EVENT_PAGE_VIEW_SCROLL,this.onScroll),this.pageView.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart),this.pageView.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd),this.pageView.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd),this.previewSprite=this.preview.getComponent(cc.Sprite);var c=i.default.shared.getString(r.Constants.KEY_USER_KNIFE,r.Constants.DEFAULT_USER_KNIFE_ID);this.pageIndex=a.default.shared.getIndexFromKnifeId(c),n.default.loadSpriteRes(a.default.shared.getKnifeResourceUrl(a.default.shared.getKnifeId(this.pageIndex)),function(t,o){e.pageView.getPages()[e.pageIndex].setScale(2),e.previewSprite.spriteFrame=o})},t.prototype.start=function(){},t.prototype.update=function(e){if(!this.hasScrolledToUserKnife){var t=new cc.Vec2(0,0);this.offsetXToCenter=(this.pageView.node.getChildByName("view").getChildByName("content").getComponent(cc.Layout).spacingX+this.pageView.getPages()[0].width)*(1+o.COUNT_KNIFES_ONE_PAGE)/2,t.x=this.pageView.getPages()[this.pageIndex].getPositionX()-this.offsetXToCenter,t.y=0,this.pageView.scrollToOffset(t,.3),this.hasScrolledToUserKnife=!0}},t.prototype.getCurrentKnifeId=function(){return a.default.shared.getKnifeId(this.pageIndex)},t.prototype.changePageIndex=function(e){this.pageView.getPages()[this.pageIndex].setScale(1),this.pageIndex=e,this.pageView.getPages()[this.pageIndex].setScale(2)},t.prototype.init=function(e){this.updateEquipButtonStatus=e},__decorate([d(cc.PageView)],t.prototype,"pageView",void 0),__decorate([d(cc.Layout)],t.prototype,"defeatBossLayout",void 0),__decorate([d(cc.Sprite)],t.prototype,"preview",void 0),__decorate([d(cc.Button)],t.prototype,"equipButton",void 0),__decorate([d(cc.AudioClip)],t.prototype,"chooseKnifeAudio",void 0),t=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Constants":"Constants","../../utils/ConfigUtil":"ConfigUtil","../../utils/ResourceUtil":"ResourceUtil","../../utils/StorageUtils":"StorageUtils"}],LotteryComponent:[function(e,t,o){"use strict";cc._RF.push(t,"12422XI8WxAYKPUR9JPz726","LotteryComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../utils/ResourceUtil"),i=e("../../utils/StorageUtils"),r=e("../../Constants"),a=e("./KnifeWarehousePageViewComponent"),s=e("../../utils/ConfigUtil"),c=cc._decorator,d=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageView=null,t.page=null,t.notGainedKnifes=new Array,t.pageViewIndexs=new Array,t.selectPage=null,t.hasStartedScroll=!1,t.randomNumber=0,t.lotteryCallback=null,t}return __extends(t,e),t.prototype.onLoad=function(){for(var e=this,t=i.default.shared.getString(r.Constants.KEY_USER_GAINED_KNIFES,r.Constants.DEFAULT_USER_KNIFE_ID).split(","),o=function(t){var o=cc.instantiate(e.page),i=o.getComponent(cc.Sprite);n.default.loadSpriteRes(s.default.shared.getKnifeResourceUrl(s.default.shared.getKnifeId(t)),function(e,t){i.spriteFrame=t}),e.pageView.addPage(o)},c=1,d=1;s.default.shared.hasKnife(s.default.shared.getKnifeId(c))&&d<=(a.COUNT_KNIFES_ONE_PAGE-1)/2;c++)s.default.shared.getKnifeObtainMethod(s.default.shared.getKnifeId(c))!=s.KnifeObtainMethod.DEFEAT_BOSS&&(o(c),d++);c=1;for(var u=0;s.default.shared.hasKnife(s.default.shared.getKnifeId(c));c++)s.default.shared.getKnifeObtainMethod(s.default.shared.getKnifeId(c))!=s.KnifeObtainMethod.DEFEAT_BOSS&&(-1==t.indexOf(s.default.shared.getKnifeId(c))&&(this.notGainedKnifes.push(c),this.pageViewIndexs.push(u)),u++,o(c));for(c=1,d=1;s.default.shared.hasKnife(s.default.shared.getKnifeId(c))&&d<(a.COUNT_KNIFES_ONE_PAGE+1)/2;c++)s.default.shared.getKnifeObtainMethod(s.default.shared.getKnifeId(c))!=s.KnifeObtainMethod.DEFEAT_BOSS&&(o(c),d++);this.randomNumber=Math.floor(Math.random()*this.notGainedKnifes.length),this.selectPage=this.pageView.getPages()[(a.COUNT_KNIFES_ONE_PAGE-1)/2]},t.prototype.start=function(){},t.prototype.update=function(e){var t=this;if(!this.hasStartedScroll){var o=cc.callFunc(function(){this.pageView.scrollToLeft(0)},this),n=cc.callFunc(function(){this.lotteryCallback()},this),i=cc.sequence(cc.repeat(cc.sequence(cc.moveBy(.1*(this.pageView.getPages().length-a.COUNT_KNIFES_ONE_PAGE),this.pageView.getPages()[0].position.x-this.pageView.getPages()[this.pageView.getPages().length-a.COUNT_KNIFES_ONE_PAGE].position.x,0),o),1),cc.moveBy(.1*this.pageViewIndexs[this.randomNumber],this.pageView.getPages()[0].position.x-this.pageView.getPages()[this.pageViewIndexs[this.randomNumber]].position.x,0),n);this.pageView.content.runAction(i),this.hasStartedScroll=!0}var r=(this.pageView.node.getChildByName("view").getChildByName("content").getComponent(cc.Layout).spacingX+this.pageView.getPages()[0].width)/2;this.pageView.getPages().forEach(function(e){if(Math.abs(e.position.x+t.pageView.content.position.x)<r)return t.selectPage.setScale(1),t.selectPage=e,void t.selectPage.setScale(2)})},t.prototype.getKnifeIndex=function(){return this.notGainedKnifes[this.randomNumber]},t.prototype.init=function(e){this.lotteryCallback=e},__decorate([u(cc.PageView)],t.prototype,"pageView",void 0),__decorate([u(cc.Prefab)],t.prototype,"page",void 0),t=__decorate([d],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Constants":"Constants","../../utils/ConfigUtil":"ConfigUtil","../../utils/ResourceUtil":"ResourceUtil","../../utils/StorageUtils":"StorageUtils","./KnifeWarehousePageViewComponent":"KnifeWarehousePageViewComponent"}],MainControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"2dc434hn4dI4JPEXP9+95Mg","MainControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../AppComponent"),i=e("../../utils/StorageUtils"),r=e("../../utils/ResourceUtil"),a=e("../../Constants"),s=e("../bridge/JSInterfaceUtils"),c=e("../../components/GiftComponent"),d=e("../../utils/ConfigUtil"),u=cc._decorator,l=u.ccclass,f=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.knifeNode=null,t.currencyLabel=null,t.playButton=null,t.shopButton=null,t.settingButton=null,t.giftButton=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.currencyLabel.getComponent(cc.Label).string=i.default.shared.getString(a.Constants.KEY_CURRENCY,"0")},t.prototype.start=function(){s.default.logAnalyticsEvent("ThrowingMaster_Home_Page_Viewed","gift_status",this.giftButton.getComponent(c.default).isReady()?"ready":"not_ready")},t.prototype.setClickEvents=function(e){var t=this;this.playButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.playButton.getComponent(cc.AudioSource).clip,!1),e.getComponent(n.default).jumpToPlayStage(),s.default.logAnalyticsEvent("ThrowingMaster_Home_Play_Game_Clicked"),s.default.logAutopilotEvent("play_game_click")},this),this.shopButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.shopButton.getComponent(cc.AudioSource).clip,!1),e.getComponent(n.default).jumpToWarehousePage(),s.default.logAnalyticsEvent("ThrowingMaster_Home_Icon_Clicked","which_icon","store")},this),this.settingButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(a.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.settingButton.getComponent(cc.AudioSource).clip,!1),e.getComponent(n.default).jumpToSettingPage(),s.default.logAnalyticsEvent("ThrowingMaster_Home_Icon_Clicked","which_icon","setting")},this),this.giftButton.node.on(cc.Node.EventType.TOUCH_END,function(){s.default.logAnalyticsEvent("ThrowingMaster_Home_Icon_Clicked","which_icon","gift")},this)},t.prototype.updateUserKnife=function(){var e=this;r.default.loadSpriteRes(d.default.shared.getKnifeResourceUrl(i.default.shared.getString(a.Constants.KEY_USER_KNIFE,a.Constants.DEFAULT_USER_KNIFE_ID)),function(t,o){e.knifeNode.getComponent(cc.Sprite).spriteFrame=o,e.knifeNode.opacity=255})},__decorate([f(cc.Node)],t.prototype,"knifeNode",void 0),__decorate([f(cc.Label)],t.prototype,"currencyLabel",void 0),__decorate([f(cc.Button)],t.prototype,"playButton",void 0),__decorate([f(cc.Button)],t.prototype,"shopButton",void 0),__decorate([f(cc.Button)],t.prototype,"settingButton",void 0),__decorate([f(cc.Button)],t.prototype,"giftButton",void 0),t=__decorate([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../AppComponent":"AppComponent","../../Constants":"Constants","../../components/GiftComponent":"GiftComponent","../../utils/ConfigUtil":"ConfigUtil","../../utils/ResourceUtil":"ResourceUtil","../../utils/StorageUtils":"StorageUtils","../bridge/JSInterfaceUtils":"JSInterfaceUtils"}],PlatformCallJS:[function(e,t,o){"use strict";cc._RF.push(t,"fc22euJrLFLDbTSSnthU8t1","PlatformCallJS"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../utils/StorageUtils"),i=e("../../Constants"),r=e("../warehouse/KnifeWarehouseComponent"),a=e("../done/ContinueComponent"),s=e("../done/DoneComponent"),c=e("../../AppComponent"),d=function(){function e(){}return e.init=function(){window.PlatformAPI=this,cc.log("PlatformCallJS init")},e.addGold=function(e){var t=n.default.shared.getInt(i.Constants.KEY_CURRENCY,0);n.default.shared.putInt(i.Constants.KEY_CURRENCY,t+e),this.currencyLabel&&(this.currencyLabel.string=String(t+e))},e.watchRewardAdCall=function(e,t){if(t==i.Constants.REWARD_AD_REWARDED)switch(e){case i.Constants.WATCH_AD_FOR_CURRENCY:r.default.watchAdForCurrency(),s.default.watchAdForCurrency();break;case i.Constants.WATCH_AD_FOR_CONTINUE_GAME:a.default.watchAdForContinueGame();break;default:-1!=e.indexOf(i.Constants.WATCH_AD_FOR_KNIFE)&&r.default.watchAdForKnife(e)}t==i.Constants.REWARD_AD_CLOSED&&e==i.Constants.WATCH_AD_FOR_CONTINUE_GAME&&(a.default.closeAd(),a.default.getContinueGame()||s.default.logFlurryDonePageViewed())},e.watchInterstitialAdCall=function(e,t){},e.endGame=function(){c.default.endGame()},e}();o.default=d,d.init(),cc._RF.pop()},{"../../AppComponent":"AppComponent","../../Constants":"Constants","../../utils/StorageUtils":"StorageUtils","../done/ContinueComponent":"ContinueComponent","../done/DoneComponent":"DoneComponent","../warehouse/KnifeWarehouseComponent":"KnifeWarehouseComponent"}],PlayStageControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"8fcc32PdKZEwpjuVPMMJ4zL","PlayStageControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./KnifeControlComponent"),i=e("./BoardControlComponent"),r=e("./RemainedKnifesComponent"),a=e("./AppleControlComponent"),s=e("../../components/ApplePartsControlComponent"),c=e("./BoardPartsControlComponent"),d=e("../../AppComponent"),u=e("../../components/StageProgressBarComponent"),l=e("../bridge/JSInterfaceUtils"),f=e("../../utils/ResourceUtil"),p=e("../../utils/StorageUtils"),h=e("../../Constants"),g=e("../../utils/ConfigUtil");o.NODE_NAME_BACKGROUND="background";var _=cc._decorator,C=_.ccclass,y=_.property,m=function(){function e(){this.count=8,this.presetKnifes=[],this.knifeNodesPool=new cc.NodePool,this.userKnifeNodes=[],this.presetKnifesNodes=[],this.userKnifeResourceUrl=null,this.currentKnifeIndex=0,this.userKnifeRealLength=420,this.userKnifeInsertedLength=240}return e.prototype.pushKnifeNodes=function(e,t,o,i){for(var r=function(r){var s=0==a.knifeNodesPool.size()?cc.instantiate(e):a.knifeNodesPool.get();f.default.loadSpriteRes(a.userKnifeResourceUrl,function(e,t){s.getComponent(cc.Sprite).spriteFrame=t}),s.getComponent(n.default).boardContainerNode=t,s.getComponent(n.default).stageNode=i,s.getComponent(n.default).knifeRealLength=a.userKnifeRealLength,s.getComponent(n.default).knifeInsertLength=a.userKnifeInsertedLength,s.setPosition(0,-o.getContentSize().height/2+100),a.userKnifeNodes.push(s)},a=this,s=0;s<this.count;s++)r()},e.prototype.getCurrentKnifeNode=function(){return this.currentKnifeIndex<this.count?this.userKnifeNodes[this.currentKnifeIndex]:null},e.prototype.getNextKnifeNode=function(){return this.currentKnifeIndex+1<this.count?this.userKnifeNodes[this.currentKnifeIndex+1]:null},e.prototype.moveToNextKnife=function(){this.currentKnifeIndex++},e.prototype.rollbackKnife=function(){this.currentKnifeIndex--},e.prototype.getUserKnifes=function(){return this.userKnifeNodes},e.prototype.getPresetKnifes=function(){return this.presetKnifesNodes},e.prototype.pushPresetKnifeNodes=function(e,t,o){for(var i=0;i<this.presetKnifes.length;i++){var r=0==this.knifeNodesPool.size()?cc.instantiate(e):this.knifeNodesPool.get();this.presetKnifesNodes.push(r),r.getComponent(n.default).boardContainerNode=t,r.getComponent(n.default).stageNode=o,r.getComponent(n.default).knifeRealLength=this.presetKnifes[i].length,r.getComponent(n.default).knifeInsertLength=this.presetKnifes[i].insertLength,r.getComponent(n.default).addToBoard(this.presetKnifes[i].resourceUrl,this.presetKnifes[i].position)}},e.prototype.setUserKnifeResourceUrl=function(e){this.userKnifeResourceUrl=e},e.prototype.setUserKnifeRealLength=function(e){this.userKnifeRealLength=e},e.prototype.setUserKnifeInsertedLength=function(e){this.userKnifeInsertedLength=e},e.prototype.reset=function(){for(var e=0;e<this.userKnifeNodes.length;e++)this.userKnifeNodes[e].getComponent(n.default).reset(),this.knifeNodesPool.put(this.userKnifeNodes[e]);for(e=0;e<this.presetKnifesNodes.length;e++)this.presetKnifesNodes[e].getComponent(n.default).reset(),this.knifeNodesPool.put(this.presetKnifesNodes[e]);this.userKnifeNodes=[],this.presetKnifesNodes=[],this.currentKnifeIndex=0},e}(),N=function(){function e(){this.rotation=[]}return e.prototype.init=function(e,t,o){f.default.loadSpriteRes(this.resourceUrl,function(n,i){t.getComponent(cc.Sprite).spriteFrame=i,o||(e.opacity=255)}),e.getComponent(i.default).setRotationSpeed(this.rotation)},e}(),S=function(){function e(){this.items=[],this.appleNodes=[],this.appleNodesPool=new cc.NodePool}return e.prototype.pushAppleNodes=function(e,t,o,n){for(var i=function(t){var i=0==r.appleNodesPool.size()?cc.instantiate(e):r.appleNodesPool.get();f.default.loadSpriteRes(r.items[t].resourceUrl,function(e,t){i.getComponent(cc.Sprite).spriteFrame=t});var s=o.width/2-15;i.getComponent(a.default).setPlayStageNode(n),i.setPosition(s*Math.sin(r.items[t].position/360*2*Math.PI),s*Math.cos(r.items[t].position/360*2*Math.PI)),i.rotation=r.items[t].position,o.addChild(i),r.appleNodes.push(i)},r=this,s=0;s<this.items.length;s++)i(s)},e.prototype.rollback=function(e){-1!=this.appleNodes.indexOf(e)&&(e.removeFromParent(),this.appleNodes.splice(this.appleNodes.indexOf(e),1),this.appleNodesPool.put(e))},e.prototype.reset=function(){for(var e=0;e<this.appleNodes.length;e++)this.appleNodes[e].removeFromParent(),this.appleNodesPool.put(this.appleNodes[e]);this.appleNodes=[]},e}(),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boardContainerNode=null,t.boardNode=null,t.backgroundNode=null,t.remainedKnifesLayoutNode=null,t.stageProgressBarLayoutNode=null,t.knifeShowAnimNode=null,t.rewardCoinShowAnimNode=null,t.rewardCoinLabel=null,t.rewardDialogNode=null,t.rewardDialogBackgroundNode=null,t.sparkNode=null,t.rewardKnifeNode=null,t.giftMask=null,t.boardPartsPrefab=null,t.knifePrefab=null,t.applePrefab=null,t.applePartsPrefab=null,t.currencyLabel=null,t.scoreLabel=null,t.stageLabel=null,t.bossNameLabel=null,t.equipButton=null,t.rewardDialogCloseButton=null,t.knifeThrowAudio=null,t.hitNormalBoardAudio=null,t.hitAppleAudio=null,t.boardBreakAudio=null,t.bossBoardBreakAudio=null,t.bossAppearAudio=null,t.bossDefeatedAudio=null,t.getKnifeAudio=null,t.knifes=null,t.apples=null,t.board=null,t.boardNodePool=null,t.applePartsNodePool=null,t.applePartsNodes=[],t.giftApples=[],t.appNode=null,t.nextKnifeNode=null,t.currentKnifeNode=null,t.boardPartsNode=null,t.stageTitle="",t.boss="",t.rewardKnifeId="",t.bossHitAudioResource="",t.score=0,t.fallKnifesCount=0,t.stage=1,t.stageboss=1,t.isBossStage=!1,t.hasThrownKnifes=!1,t.hasRewardKnife=!1,t.isMaskShow=!1,t.onTouchCallback=function(e){t.backgroundNode.off(cc.Node.EventType.TOUCH_START);var o=t.knifes.getCurrentKnifeNode();o&&o.getComponent(n.default).throw(t.boardContainerNode.position.y-t.boardNode.getContentSize().height/2-o.getComponent(n.default).knifeRealLength)?(t.currentKnifeNode=o,t.remainedKnifesLayoutNode.getComponent(r.default).throwOneKnife(),p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(t.knifeThrowAudio,!1),t.hasThrownKnifes=!0,t.nextKnifeNode=t.knifes.getNextKnifeNode(),t.nextKnifeNode||(t.backgroundNode.off(cc.Node.EventType.TOUCH_START),t.currentKnifeNode.getComponent(n.default).setLastKnife(!0)),t.knifes.moveToNextKnife()):t.backgroundNode.on(cc.Node.EventType.TOUCH_START,t.onTouchCallback)},t}return __extends(t,e),t.prototype.onLoad=function(){this.boardNodePool=new cc.NodePool,this.applePartsNodePool=new cc.NodePool,this.remainedKnifesLayoutNode.getComponent(r.default).loadRes()},t.prototype.start=function(){},t.prototype.init=function(e,t,o,n,i){this.stage=t,this.stageboss=o;var r=g.default.shared.getStageIdByIndex(t,o);this.isBossStage=t%h.Constants.INTERVAL_BOSS_STAGE==0,this.hasRewardKnife=i,this.isBossStage&&(this.boss=g.default.shared.getBossName(o),this.rewardKnifeId=g.default.shared.getBossRewardKnife(o),this.bossHitAudioResource=g.default.shared.getBossHitAudioResourceUrl(o)),this.stageTitle=this.isBossStage?"BOSS: "+this.boss:h.Constants.PREFIX_STAGE_TITLE+t,this.appNode=e,this.score=n,this.scoreLabel.string=String(this.score),this.knifes||(this.knifes=new m),this.knifes.count=g.default.shared.getPlayStageUserKnifesCount(r);var a=p.default.shared.getString(h.Constants.KEY_USER_KNIFE,h.Constants.DEFAULT_USER_KNIFE_ID);this.knifes.setUserKnifeResourceUrl(g.default.shared.getKnifeResourceUrl(a)),this.knifes.setUserKnifeInsertedLength(g.default.shared.getKnifeInsertLength(a)),this.knifes.setUserKnifeRealLength(g.default.shared.getKnifeLength(a)),this.knifes.presetKnifes=[];for(var s=0;s<g.default.shared.getPresetKnifesArray(r).length;s++){var c=g.default.shared.getPresetKnifeId(r,s);this.knifes.presetKnifes.push({resourceUrl:g.default.shared.getKnifeResourceUrl(c),position:g.default.shared.getPresetKnifePositionAngle(r,s),length:g.default.shared.getKnifeLength(c),insertLength:g.default.shared.getKnifeInsertLength(c)})}this.apples||(this.apples=new S),this.apples.items=[];for(s=0;s<g.default.shared.getPresetApplesArray(r).length;s++){var d=g.default.shared.getPresetAppleId(r,s);this.apples.items.push({resourceUrl:g.default.shared.getAppleResourceUrl(d),position:g.default.shared.getPresetApplePositionAngle(r,s)})}this.boardNodePool&&this.boardNodePool.size()>0&&(this.boardNode=this.boardNodePool.get(),this.boardContainerNode.addChild(this.boardNode)),this.board=new N;var u=g.default.shared.getBoardId(r);this.board.resourceUrl=g.default.shared.getBoardResourceUrl(u),this.board.rotation=g.default.shared.getBoardRotation(r),this.board.init(this.boardContainerNode,this.boardNode,this.isBossStage),this.setUpPlayStage()},t.prototype.onKnifeFall=function(){var e=this;if(this.fallKnifesCount++,this.fallKnifesCount>=this.knifes.count+this.knifes.presetKnifes.length)if(this.isBossStage&&!this.hasRewardKnife){var t=p.default.shared.getString(h.Constants.KEY_USER_GAINED_KNIFES,"").split(",");-1==t.indexOf(this.rewardKnifeId)?(this.equipButton.getComponent(cc.Button).enabled=!0,t.push(this.rewardKnifeId),p.default.shared.putString(h.Constants.KEY_USER_GAINED_KNIFES,String(t)),p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.getKnifeAudio,!1),f.default.loadSpriteRes(g.default.shared.getKnifeResourceUrl(this.rewardKnifeId),function(t,o){e.rewardKnifeNode.getComponent(cc.Sprite).spriteFrame=o,e.bossNameLabel.getComponent(cc.Label).string=e.boss,e.rewardDialogNode.opacity=255,e.rewardDialogNode.getComponent(cc.BlockInputEvents).enabled=!0,e.rewardDialogCloseButton.getComponent(cc.Button).node.on(cc.Node.EventType.TOUCH_END,function(){p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.rewardDialogCloseButton.getComponent(cc.AudioSource).clip,!1),e.jumpToNextStage(e.score,e.stageboss,!0),e.equipButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END),e.rewardDialogCloseButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END),e.rewardDialogNode.getComponent(cc.BlockInputEvents).enabled=!1,e.rewardDialogNode.opacity=0,l.default.logAnalyticsEvent("ThrowingMaster_Reward_Card_Clicked","operation","cancel")},e),e.equipButton.getComponent(cc.Button).node.on(cc.Node.EventType.TOUCH_END,function(){p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.equipButton.getComponent(cc.AudioSource).clip,!1);for(var t=0;t<e.knifes.getUserKnifes().length;t++)e.knifes.getUserKnifes()[t].getComponent(cc.Sprite).spriteFrame=o;p.default.shared.putString(h.Constants.KEY_USER_KNIFE,e.rewardKnifeId),e.jumpToNextStage(e.score,e.stageboss,!0),e.equipButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END),e.rewardDialogCloseButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END),e.rewardDialogNode.getComponent(cc.BlockInputEvents).enabled=!1,e.rewardDialogNode.opacity=0,l.default.logAnalyticsEvent("ThrowingMaster_Reward_Card_Clicked","operation","equip")},e),l.default.logAnalyticsEvent("ThrowingMaster_Reward_Card_Viewed"),l.default.logAnalyticsEvent("ThrowingMaster_Knives_Unlock","method","boss","which_knives",e.rewardKnifeId)})):this.jumpToNextStage(this.score,this.stageboss,this.hasRewardKnife)}else this.jumpToNextStage(this.score,this.stageboss,this.hasRewardKnife)},t.prototype.onStageFailed=function(){this.fallKnifesCount=0,this.appNode.getComponent(d.default).jumpToContinuePage(this.stage,this.score)},t.prototype.onStageFinished=function(){if(this.boardContainerNode.getComponent(i.default).stopRotation(),this.boardContainerNode.rotation=0,this.isBossStage){if(this.stageboss++,p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.bossDefeatedAudio,!1),this.hasRewardKnife||-1!=p.default.shared.getString(h.Constants.KEY_USER_GAINED_KNIFES,"").split(",").indexOf(this.rewardKnifeId)){var e=this.rewardCoinShowAnimNode.children,t=Math.floor(10*Math.random()+50);this.rewardCoinLabel.getComponent(cc.Label).string="+"+t,p.default.shared.putInt(h.Constants.KEY_CURRENCY,p.default.shared.getInt(h.Constants.KEY_CURRENCY,0)+t),this.rewardCoinShowAnimNode.opacity=255;for(var o=0;o<e.length;o++)e[o].getComponent(cc.Animation).play()}}else{p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.boardBreakAudio,!1);var n=this.boardContainerNode.getPosition();this.boardPartsNode||(this.boardPartsNode=cc.instantiate(this.boardPartsPrefab),this.node.addChild(this.boardPartsNode)),this.boardPartsNode.opacity=255,this.boardPartsNode.setPosition(n),this.boardPartsNode.getComponent(c.default).split()}this.boardNode.removeAllChildren(),this.boardNode.removeFromParent(),this.boardNodePool.put(this.boardNode),this.fallAllKnifes()},t.prototype.onAppleHit=function(e,t,o){this.apples.rollback(e),p.default.shared.putInt(h.Constants.KEY_CURRENCY,p.default.shared.getInt(h.Constants.KEY_CURRENCY,0)+2),this.currencyLabel.getComponent(cc.Label).string=p.default.shared.getString(h.Constants.KEY_CURRENCY,"0"),p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.hitAppleAudio,!1);var n=null;n=0==this.applePartsNodePool.size()?cc.instantiate(this.applePartsPrefab):this.applePartsNodePool.get(),this.node.addChild(n),n.setPosition(this.node.convertToNodeSpaceAR(new cc.Vec2(t,o))),n.getComponent(s.default).split(),this.applePartsNodes.push(n)},t.prototype.onKnifeInserted=function(){this.score++,this.scoreLabel.string=String(this.score),this.sparkNode.rotation=-this.node.rotation,this.sparkNode.getComponent(cc.ParticleSystem).resetSystem(),p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&(this.isBossStage?f.default.loadAudioClip(this.bossHitAudioResource,function(e,t){cc.audioEngine.playEffect(t,!1)}):cc.audioEngine.playEffect(this.hitNormalBoardAudio,!1)),this.nextKnifeNode&&(this.nextKnifeNode.removeFromParent(),this.backgroundNode.addChild(this.nextKnifeNode,1),this.nextKnifeNode.getComponent(n.default).ready(),this.backgroundNode.on(cc.Node.EventType.TOUCH_START,this.onTouchCallback))},t.prototype.getCurrentStage=function(){return this.stage},t.prototype.continuePlay=function(){if(this.rewardDialogNode.opacity=0,this.currentKnifeNode){this.currentKnifeNode.getComponent(n.default).reset();for(var e=0;e<this.applePartsNodes.length;e++)this.applePartsNodes[e].removeFromParent(),this.applePartsNodePool.put(this.applePartsNodes[e]);this.currentKnifeNode.removeFromParent(),this.backgroundNode.addChild(this.currentKnifeNode,1),this.currentKnifeNode.setAnchorPoint(.5,0),this.currentKnifeNode.setPosition(new cc.Vec2(0,-(this.backgroundNode.height/2-100))),this.currentKnifeNode.rotation=0,this.backgroundNode.off(cc.Node.EventType.TOUCH_START),this.backgroundNode.on(cc.Node.EventType.TOUCH_START,this.onTouchCallback),this.currentKnifeNode.getComponent(n.default).ready(),this.boardContainerNode.getComponent(i.default).startRotation(),this.hasThrownKnifes&&(this.knifes.rollbackKnife(),this.remainedKnifesLayoutNode.getComponent(r.default).rollbackOneKnife())}else this.jumpToNextStage(this.score,this.stageboss,this.hasRewardKnife)},t.prototype.setUpPlayStage=function(){var e=this;if(this.stageLabel.getComponent(cc.Label).string=this.stageTitle,this.currencyLabel.getComponent(cc.Label).string=p.default.shared.getString(h.Constants.KEY_CURRENCY,"0"),this.stageProgressBarLayoutNode.getComponent(u.default).init(this.stage),this.isBossStage){p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.bossAppearAudio,!1);for(var t=this.knifeShowAnimNode.children,o=0;o<t.length;o++)t[o].getComponent(cc.Animation).play();t[0].getComponent(cc.Animation).on(h.Constants.EVENT_ANIMATION_FINISH,function(){t[0].getComponent(cc.Animation).off(h.Constants.EVENT_ANIMATION_FINISH),e.boardContainerNode.opacity=255,e.initPlayView()},this)}else this.initPlayView();p.default.shared.getBoolean(h.Constants.KEY_LEFT_HAND_SWITCH,!1)&&(this.remainedKnifesLayoutNode.getComponent(cc.Widget).isAlignLeft=!1,this.remainedKnifesLayoutNode.getComponent(cc.Widget).isAlignRight=!0,this.remainedKnifesLayoutNode.getComponent(cc.Widget).right=48),l.default.logAnalyticsEvent("ThrowingMaster_Game_Stage_Page_Viewed")},t.prototype.initPlayView=function(){this.knifes.pushPresetKnifeNodes(this.knifePrefab,this.boardContainerNode,this.node),this.knifes.pushKnifeNodes(this.knifePrefab,this.boardContainerNode,this.backgroundNode,this.node),this.remainedKnifesLayoutNode.getComponent(r.default).addKnifes(this.knifes.count),this.apples.pushAppleNodes(this.applePrefab,this.boardContainerNode,this.boardNode,this.node),this.currentKnifeNode=this.knifes.getCurrentKnifeNode(),this.currentKnifeNode?(this.currentKnifeNode.getComponent(n.default).stageNode=this.node,this.backgroundNode.off(cc.Node.EventType.TOUCH_START),this.backgroundNode.on(cc.Node.EventType.TOUCH_START,this.onTouchCallback),this.currentKnifeNode.removeFromParent(),this.backgroundNode.addChild(this.currentKnifeNode,1),this.currentKnifeNode.getComponent(n.default).ready(),this.boardContainerNode.getComponent(i.default).startRotation()):this.jumpToNextStage(this.score,this.stageboss,this.hasRewardKnife),this.equipButton.getComponent(cc.Button).enabled=!1},t.prototype.onAllStagesWin=function(){var e=this;p.default.shared.getBoolean(h.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(this.getKnifeAudio,!1),p.default.shared.putInt(h.Constants.KEY_CURRENCY,p.default.shared.getInt(h.Constants.KEY_CURRENCY,0)+500),this.currencyLabel.getComponent(cc.Label).string=p.default.shared.getString(h.Constants.KEY_CURRENCY,"0"),this.isMaskShow=!0,this.giftMask.opacity=200,this.giftMask.getChildByName("gift_coin_count_container").getChildByName("gift_coin_count").getComponent(cc.Label).string="+"+String(500);for(var t=0;t<h.Constants.COUNT_GIFT_APPLES;t++){var o=cc.instantiate(this.applePartsPrefab);o.setPosition(new cc.Vec2(400*Math.random()*(Math.random()>.5?1:-1)+100,400*Math.random()-100)),this.giftMask.addChild(o),o.getComponent(s.default).split(),this.giftApples.push(o)}this.giftMask.on(cc.Node.EventType.TOUCH_END,function(){e.closeGiftMask()},this),this.scheduleOnce(function(){e.closeGiftMask()},2)},t.prototype.closeGiftMask=function(){if(this.isMaskShow){for(var e=0;e<this.giftApples.length;e++)this.node.removeChild(this.giftApples[e]);this.giftMask.opacity=0,this.isMaskShow=!1,this.giftMask.off(cc.Node.EventType.TOUCH_END),this.appNode.getComponent(d.default).jumpToMainPage()}},t.prototype.fallAllKnifes=function(){for(var e=0;e<this.knifes.getUserKnifes().length;e++)this.knifes.getUserKnifes()[e].group="default";for(e=0;e<this.knifes.getPresetKnifes().length;e++)this.knifes.getPresetKnifes()[e].group="default";for(e=0;e<this.knifes.getUserKnifes().length;e++)this.knifes.getUserKnifes()[e].getComponent(n.default).startFalling();for(e=0;e<this.knifes.getPresetKnifes().length;e++)this.knifes.getPresetKnifes()[e].getComponent(n.default).stageNode=this.node,this.knifes.getPresetKnifes()[e].getComponent(n.default).startFalling()},t.prototype.jumpToNextStage=function(e,t,o){for(var n=0;n<this.applePartsNodes.length;n++)this.applePartsNodes[n].removeFromParent(),this.applePartsNodePool.put(this.applePartsNodes[n]);this.remainedKnifesLayoutNode.getComponent(r.default).reset(),this.knifes.reset(),this.apples.reset(),this.boardContainerNode.opacity=0,this.boardPartsNode.opacity=0,this.rewardCoinShowAnimNode.opacity=0,this.fallKnifesCount=0,this.appNode.getComponent(d.default).jumpToNextStage(e,t,o)},__decorate([y(cc.Node)],t.prototype,"boardContainerNode",void 0),__decorate([y(cc.Node)],t.prototype,"boardNode",void 0),__decorate([y(cc.Node)],t.prototype,"backgroundNode",void 0),__decorate([y(cc.Node)],t.prototype,"remainedKnifesLayoutNode",void 0),__decorate([y(cc.Node)],t.prototype,"stageProgressBarLayoutNode",void 0),__decorate([y(cc.Node)],t.prototype,"knifeShowAnimNode",void 0),__decorate([y(cc.Node)],t.prototype,"rewardCoinShowAnimNode",void 0),__decorate([y(cc.Node)],t.prototype,"rewardCoinLabel",void 0),__decorate([y(cc.Node)],t.prototype,"rewardDialogNode",void 0),__decorate([y(cc.Node)],t.prototype,"rewardDialogBackgroundNode",void 0),__decorate([y(cc.Node)],t.prototype,"sparkNode",void 0),__decorate([y(cc.Node)],t.prototype,"rewardKnifeNode",void 0),__decorate([y(cc.Node)],t.prototype,"giftMask",void 0),__decorate([y(cc.Prefab)],t.prototype,"boardPartsPrefab",void 0),__decorate([y(cc.Prefab)],t.prototype,"knifePrefab",void 0),__decorate([y(cc.Prefab)],t.prototype,"applePrefab",void 0),__decorate([y(cc.Prefab)],t.prototype,"applePartsPrefab",void 0),__decorate([y(cc.Label)],t.prototype,"currencyLabel",void 0),__decorate([y(cc.Label)],t.prototype,"scoreLabel",void 0),__decorate([y(cc.Label)],t.prototype,"stageLabel",void 0),__decorate([y(cc.Label)],t.prototype,"bossNameLabel",void 0),__decorate([y(cc.Button)],t.prototype,"equipButton",void 0),__decorate([y(cc.Button)],t.prototype,"rewardDialogCloseButton",void 0),__decorate([y(cc.AudioClip)],t.prototype,"knifeThrowAudio",void 0),__decorate([y(cc.AudioClip)],t.prototype,"hitNormalBoardAudio",void 0),__decorate([y(cc.AudioClip)],t.prototype,"hitAppleAudio",void 0),__decorate([y(cc.AudioClip)],t.prototype,"boardBreakAudio",void 0),__decorate([y(cc.AudioClip)],t.prototype,"bossBoardBreakAudio",void 0),__decorate([y(cc.AudioClip)],t.prototype,"bossAppearAudio",void 0),__decorate([y(cc.AudioClip)],t.prototype,"bossDefeatedAudio",void 0),__decorate([y(cc.AudioClip)],t.prototype,"getKnifeAudio",void 0),t=__decorate([C],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../AppComponent":"AppComponent","../../Constants":"Constants","../../components/ApplePartsControlComponent":"ApplePartsControlComponent","../../components/StageProgressBarComponent":"StageProgressBarComponent","../../utils/ConfigUtil":"ConfigUtil","../../utils/ResourceUtil":"ResourceUtil","../../utils/StorageUtils":"StorageUtils","../bridge/JSInterfaceUtils":"JSInterfaceUtils","./AppleControlComponent":"AppleControlComponent","./BoardControlComponent":"BoardControlComponent","./BoardPartsControlComponent":"BoardPartsControlComponent","./KnifeControlComponent":"KnifeControlComponent","./RemainedKnifesComponent":"RemainedKnifesComponent"}],RemainedKnifesComponent:[function(e,t,o){"use strict";cc._RF.push(t,"65fedKGy6pD35dLayapixjo","RemainedKnifesComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../utils/ResourceUtil"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.knifeNodePool=null,t.knifeNodes=[],t.knifesCount=0,t.thrownKnifesCount=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.knifeNodePool=new cc.NodePool,this.loadRes()},t.prototype.loadRes=function(){var e=this;n.default.loadSpriteRes("./play/knife_icon_used",function(t,o){e.usedKnifeSprite=o,e.updateRemainedKnifesState()}),n.default.loadSpriteRes("./play/knife_icon",function(t,o){e.unusedKnifeSprite=o,e.updateRemainedKnifesState()})},t.prototype.addKnifes=function(e){this.node.removeAllChildren();for(var t=0;t<e;t++){var o=this.knifeNodePool&&0!=this.knifeNodePool.size()?this.knifeNodePool.get():new cc.Node("KnifeIcon"+t);(o.getComponent(cc.Sprite)?o.getComponent(cc.Sprite):o.addComponent(cc.Sprite)).spriteFrame=t<this.thrownKnifesCount?this.usedKnifeSprite:this.unusedKnifeSprite,this.knifeNodes.push(o),this.node.addChild(o)}this.knifesCount+=e,this.updateRemainedKnifesState()},t.prototype.throwOneKnife=function(){this.thrownKnifesCount<this.knifesCount&&(this.node.children[this.thrownKnifesCount].getComponent(cc.Sprite).spriteFrame=this.usedKnifeSprite,this.thrownKnifesCount++)},t.prototype.rollbackOneKnife=function(){this.thrownKnifesCount--,this.node.children[this.thrownKnifesCount].getComponent(cc.Sprite).spriteFrame=this.unusedKnifeSprite},t.prototype.reset=function(){for(var e=0;e<this.knifeNodes.length;e++)this.knifeNodes[e].removeFromParent(),this.knifeNodePool.put(this.knifeNodes[e]);this.knifeNodes=[],this.thrownKnifesCount=0,this.knifesCount=0},t.prototype.updateRemainedKnifesState=function(){for(var e=0;e<this.knifeNodes.length;e++)this.knifeNodes[e].getComponent(cc.Sprite).spriteFrame=e<this.thrownKnifesCount?this.usedKnifeSprite:this.unusedKnifeSprite},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../utils/ResourceUtil":"ResourceUtil"}],ResourceUtil:[function(e,t,o){"use strict";cc._RF.push(t,"8973c5/BINKVpyL1V3Clkdl","ResourceUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.loadSpriteRes=function(e,t){var o=cc.loader.getRes(e);if(o){var n=new cc.SpriteFrame;n.setTexture(o),t(null,n)}else cc.loader.loadRes(e,cc.SpriteFrame,t)},e.loadSpriteFrameWithTexturePath=function(t,o){e.loadTextureWithPath(t,function(e,t){if(t){var n=t.getContentSize();o(null,new cc.SpriteFrame(t,cc.rect(0,0,n.width,n.height)))}else o(e,t)})},e.resourcesFilePathForName=function(e){return"res/raw-assets/resources/"+e},e.loadTextureWithPath=function(e,t,o){void 0===o&&(o=null),(e=this.getAbsolutePath(e))instanceof Error?t(e,null):cc.textureCache.addImage(e,function(e){e instanceof cc.Texture2D?t(null,e):t(e,null)},o)},e.getAbsolutePath=function(t){var o=t;return 0!=t.indexOf("/")&&(cc.sys.isNative?(t=jsb.fileUtils.fullPathForFilename(t)||jsb.fileUtils.fullPathForFilename(e.resourcesFilePathForName(t)))||(cc.log("get Absolute Path : File Not Found "+o),t=new Error):t=e.resourcesFilePathForName(t)),t},e.loadTexture2DRes=function(e,t){var o=cc.loader.getRes(e);o?t(null,o):cc.loader.loadRes(e,cc.Texture2D,t)},e.loadAudioClip=function(e,t){var o=cc.loader.getRes(e);o?t(null,o):cc.loader.loadRes(e,cc.AudioClip,t)},e}();o.default=n,cc._RF.pop()},{}],RewardComponent:[function(e,t,o){"use strict";cc._RF.push(t,"cc96fAm6TVKULIyVNZcrchR","RewardComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../utils/ResourceUtil"),i=e("../../utils/StorageUtils"),r=e("../../Constants"),a=e("../../utils/ConfigUtil"),s=cc._decorator,c=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardKnifeSprite=null,t.equipButton=null,t.closeButton=null,t.knifeIndex=1,t.equipCallback=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;n.default.loadSpriteRes(a.default.shared.getKnifeResourceUrl(a.default.shared.getKnifeId(this.knifeIndex)),function(t,o){e.rewardKnifeSprite.spriteFrame=o}),this.equipButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(r.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.equipButton.getComponent(cc.AudioSource).clip,!1),i.default.shared.putString(r.Constants.KEY_USER_KNIFE,a.default.shared.getKnifeId(e.knifeIndex)),e.equipCallback(),e.node.removeFromParent()},this),this.closeButton.node.on(cc.Node.EventType.TOUCH_END,function(){i.default.shared.getBoolean(r.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.closeButton.getComponent(cc.AudioSource).clip,!1),e.node.removeFromParent()},this)},t.prototype.start=function(){},t.prototype.init=function(e,t){this.knifeIndex=e,this.equipCallback=t},__decorate([d(cc.Sprite)],t.prototype,"rewardKnifeSprite",void 0),__decorate([d(cc.Button)],t.prototype,"equipButton",void 0),__decorate([d(cc.Button)],t.prototype,"closeButton",void 0),t=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Constants":"Constants","../../utils/ConfigUtil":"ConfigUtil","../../utils/ResourceUtil":"ResourceUtil","../../utils/StorageUtils":"StorageUtils"}],SettingComponent:[function(e,t,o){"use strict";cc._RF.push(t,"60afbDFBeVPw5hUV9l+N55T","SettingComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./SwitchControlComponent"),i=e("../../Constants"),r=e("../../utils/StorageUtils"),a=e("../bridge/JSInterfaceUtils"),s=cc._decorator,c=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currencyLabel=null,t.backButton=null,t.buttonClickAudio=null,t.soundsSwitchComponent=null,t.vibrationSwitchComponent=null,t.leftHandSwitchComponent=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;cc.log("SettingComponent onLoad()"),this.currencyLabel.getComponent(cc.Label).string=r.default.shared.getString(i.Constants.KEY_CURRENCY,"0"),this.initSwitchComponent(i.Constants.KEY_SOUND_SWITCH,this.soundsSwitchComponent),this.initSwitchComponent(i.Constants.KEY_VIBRATION_SWITCH,this.vibrationSwitchComponent),this.initSwitchComponent(i.Constants.KEY_LEFT_HAND_SWITCH,this.leftHandSwitchComponent),this.backButton.node.on(cc.Node.EventType.TOUCH_END,function(){r.default.shared.getBoolean(i.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(e.backButton.getComponent(cc.AudioSource).clip,!1),e.node.removeFromParent()},this),a.default.logAnalyticsEvent("ThrowingMaster_Settings_Page_Viewed")},t.prototype.start=function(){},t.prototype.update=function(e){},t.prototype.initSwitchComponent=function(e,t){var o=this;r.default.shared.getString(e)||r.default.shared.putBoolean(e,e!=i.Constants.KEY_LEFT_HAND_SWITCH),t.init(r.default.shared.getBoolean(e)),t.setSwitchStateChangeCallback(function(t){switch(r.default.shared.getBoolean(i.Constants.KEY_SOUND_SWITCH,!0)&&cc.audioEngine.playEffect(o.buttonClickAudio,!1),r.default.shared.putBoolean(e,t),e){case i.Constants.KEY_VIBRATION_SWITCH:a.default.logAnalyticsEvent("ThrowingMaster_Settings_Vibration_Switch","operation",t?"turn_on":"turn_off");break;case i.Constants.KEY_SOUND_SWITCH:a.default.logAnalyticsEvent("ThrowingMaster_Settings_Sounds_Switch","operation",t?"turn_on":"turn_off");break;case i.Constants.KEY_LEFT_HAND_SWITCH:a.default.logAnalyticsEvent("ThrowingMaster_Settings_LeftHand_Switch","operation",t?"turn_on":"turn_off")}})},__decorate([d(cc.Label)],t.prototype,"currencyLabel",void 0),__decorate([d(cc.Button)],t.prototype,"backButton",void 0),__decorate([d(cc.AudioClip)],t.prototype,"buttonClickAudio",void 0),__decorate([d(n.default)],t.prototype,"soundsSwitchComponent",void 0),__decorate([d(n.default)],t.prototype,"vibrationSwitchComponent",void 0),__decorate([d(n.default)],t.prototype,"leftHandSwitchComponent",void 0),t=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Constants":"Constants","../../utils/StorageUtils":"StorageUtils","../bridge/JSInterfaceUtils":"JSInterfaceUtils","./SwitchControlComponent":"SwitchControlComponent"}],StageProgressBarComponent:[function(e,t,o){"use strict";cc._RF.push(t,"374a9r2QzlDgpgamW2Qqx5Z","StageProgressBarComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../utils/ResourceUtil"),i=e("../Constants"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(e){this.node.removeAllChildren();for(var t=function(t){var r=new cc.Node("StageProgressIcon"+t),a=r.addComponent(cc.Sprite);t<i.Constants.INTERVAL_BOSS_STAGE?n.default.loadSpriteRes(e%i.Constants.INTERVAL_BOSS_STAGE>=t||e%i.Constants.INTERVAL_BOSS_STAGE==0?"./common/stage_progress_bar_circle_orange":"./common/stage_progress_bar_circle_gray",function(e,t){a.spriteFrame=t}):n.default.loadSpriteRes(e%i.Constants.INTERVAL_BOSS_STAGE==0?"./common/stage_progress_bar_knife_orange":"./common/stage_progress_bar_knife",function(e,t){a.spriteFrame=t}),o.node.addChild(r)},o=this,r=1;r<=i.Constants.INTERVAL_BOSS_STAGE;r++)t(r)},t=__decorate([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../Constants":"Constants","../utils/ResourceUtil":"ResourceUtil"}],StorageUtils:[function(e,t,o){"use strict";cc._RF.push(t,"6f506fYV3BAK5i5kNUypvLY","StorageUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./localforage"),i=function(){function e(){this.cache={},this.hasInited=!1,window.LocalForage=n,window.StorageUtils=e}return Object.defineProperty(e,"shared",{get:function(){return this.sharedInstance||(this.sharedInstance=new e),this.sharedInstance},enumerable:!0,configurable:!0}),e.prototype.init=function(e){var t=this;n.iterate(function(e,o,n){t.cache[o]=e},function(){t.hasInited=!0,e()})},e.prototype.getBoolean=function(e,t){return null==this.getItem(e)?this.valueOrDefault(t,!1):"true"===this.getItem(e)},e.prototype.putBoolean=function(e,t){this.putItem(e,t?"true":"false")},e.prototype.getInt=function(e,t){var o=this.getItem(e);if(null==o)return this.valueOrDefault(t,0);var n=parseInt(o);return isNaN(n)?this.valueOrDefault(t,0):n},e.prototype.putInt=function(e,t){this.putItem(e,String(t))},e.prototype.getString=function(e,t){var o=this.getItem(e);return null==o?this.valueOrDefault(t,""):o},e.prototype.putString=function(e,t){this.putItem(e,t)},e.prototype.getJSON=function(e){return JSON.parse(this.getItem(e))},e.prototype.putJSON=function(e,t){this.putItem(e,JSON.stringify(t))},e.prototype.removeItem=function(e){this.checkInited(),delete this.cache[e],n.removeItem(e)},e.prototype.clearCache=function(){this.checkInited(),this.cache={}},e.prototype.valueOrDefault=function(e,t){return null==e?t:e},e.prototype.putItem=function(e,t){this.checkInited(),this.cache[e]=t,n.setItem(e,t)},e.prototype.getItem=function(e){return this.checkInited(),e in this.cache?this.cache[e]:null},e.prototype.checkInited=function(){this.hasInited||cc.error("do not user StorageUtils before init completed!!!!")},e}();o.default=i,i.shared,cc._RF.pop()},{"./localforage":"localforage"}],SwitchControlComponent:[function(e,t,o){"use strict";cc._RF.push(t,"836497h14BF+5ky5dtx+dWb","SwitchControlComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../utils/ResourceUtil"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checked=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.updateSwitchState(this.node,this.checked),this.node.on(cc.Node.EventType.TOUCH_END,function(t){e.checked=!e.checked,e.switchStateChangeCallback(e.checked),e.updateSwitchState(e.node,e.checked)})},t.prototype.init=function(e){this.checked=e},t.prototype.setSwitchStateChangeCallback=function(e){this.switchStateChangeCallback=e},t.prototype.updateSwitchState=function(e,t){t?n.default.loadSpriteRes("./settings/setting_switch_on",function(t,o){e.getComponent(cc.Sprite).spriteFrame=o}):n.default.loadSpriteRes("./settings/setting_switch_off",function(t,o){e.getComponent(cc.Sprite).spriteFrame=o})},t=__decorate([r],t)}(cc.Component));o.default=a,cc._RF.pop()},{"../../utils/ResourceUtil":"ResourceUtil"}],localforage:[function(e,t,o){(function(n){"use strict";cc._RF.push(t,"f92f1YquLtCcpAqp8ni3/2p","localforage");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e){if("object"===(void 0===o?"undefined":i(o))&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).localforage=e()}})(function(){return function t(o,n,i){function r(s,c){if(!n[s]){if(!o[s]){var d="function"==typeof e&&e;if(!c&&d)return d(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};o[s][0].call(l.exports,function(e){var t=o[s][1][e];return r(t||e)},l,l.exports,t,o,n,i)}return n[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,o){(function(e){var o,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var r=0,a=new i(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),o=function(){s.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,o=function(){c.port2.postMessage(0)}}var d=[];function u(){var e,t;n=!0;for(var o=d.length;o;){for(t=d,d=[],e=-1;++e<o;)t[e]();o=d.length}n=!1}t.exports=function(e){1!==d.push(e)||n||o()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,o){var n=e(1);function r(){}var a={},s=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,e!==r&&h(this,e)}function l(e,t,o){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof o&&(this.onRejected=o,this.callRejected=this.otherCallRejected)}function f(e,t,o){n(function(){var n;try{n=t(o)}catch(t){return a.reject(e,t)}n===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,n)})}function p(e){var t=e&&e.then;if(e&&"object"===(void 0===e?"undefined":i(e))&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var o=!1;function n(t){o||(o=!0,a.reject(e,t))}function i(t){o||(o=!0,a.resolve(e,t))}var r=g(function(){t(i,n)});"error"===r.status&&n(r.value)}function g(e,t){var o={};try{o.value=e(t),o.status="success"}catch(e){o.status="error",o.value=e}return o}t.exports=o=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===c||"function"!=typeof t&&this.state===s)return this;var o=new this.constructor(r);this.state!==d?f(o,this.state===c?e:t,this.outcome):this.queue.push(new l(o,e,t));return o},l.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){a.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},a.resolve=function(e,t){var o=g(p,t);if("error"===o.status)return a.reject(e,o.value);var n=o.value;if(n)h(e,n);else{e.state=c,e.outcome=t;for(var i=-1,r=e.queue.length;++i<r;)e.queue[i].callFulfilled(t)}return e},a.reject=function(e,t){e.state=s,e.outcome=t;for(var o=-1,n=e.queue.length;++o<n;)e.queue[o].callRejected(t);return e},o.resolve=function(e){if(e instanceof this)return e;return a.resolve(new this(r),e)},o.reject=function(e){var t=new this(r);return a.reject(t,e)},o.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,n=!1;if(!o)return this.resolve([]);var i=new Array(o),s=0,c=-1,d=new this(r);for(;++c<o;)u(e[c],c);return d;function u(e,r){t.resolve(e).then(function(e){i[r]=e,++s!==o||n||(n=!0,a.resolve(d,i))},function(e){n||(n=!0,a.reject(d,e))})}},o.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,n=!1;if(!o)return this.resolve([]);var i=-1,s=new this(r);for(;++i<o;)c(e[i]);return s;function c(e){t.resolve(e).then(function(e){n||(n=!0,a.resolve(s,e))},function(e){n||(n=!0,a.reject(s,e))})}}},{1:1}],3:[function(e,t,o){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,o){var n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};var r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function a(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var o=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)o.append(e[n]);return o.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function c(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function d(e,t,o){"function"==typeof t&&e.then(t),"function"==typeof o&&e.catch(o)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",p=void 0,h={},g=Object.prototype.toString,_="readonly",C="readwrite";function y(e){return"boolean"==typeof p?s.resolve(p):function(e){return new s(function(t){var o=e.transaction(f,C),n=a([""]);o.objectStore(f).put(n,"key"),o.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},o.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);t(o||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return p=e})}function m(e){var t=h[e.name],o={};o.promise=new s(function(e,t){o.resolve=e,o.reject=t}),t.deferredOperations.push(o),t.dbReady?t.dbReady=t.dbReady.then(function(){return o.promise}):t.dbReady=o.promise}function N(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var o=h[e.name].deferredOperations.pop();if(o)return o.reject(t),o.promise}function v(e,t){return new s(function(o,n){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return o(e.db);m(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var a=r.open.apply(r,i);t&&(a.onupgradeneeded=function(t){var o=a.result;try{o.createObjectStore(e.storeName),t.oldVersion<=1&&o.createObjectStore(f)}catch(o){if("ConstraintError"!==o.name)throw o;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),n(a.error)},a.onsuccess=function(){o(a.result),N(e)}})}function E(e){return v(e,!1)}function b(e){return v(e,!0)}function T(e,t){if(!e.db)return!0;var o=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||o){if(o){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function I(e){return a([function(e){for(var t=e.length,o=new ArrayBuffer(t),n=new Uint8Array(o),i=0;i<t;i++)n[i]=e.charCodeAt(i);return o}(atob(e.data))],{type:e.type})}function A(e){return e&&e.__local_forage_encoded_blob}function w(e){var t=this,o=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return d(o,e,e),o}function K(e,t,o,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);o(null,i)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return s.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),b(e)}).then(function(){return function(e){m(e);for(var t=h[e.name],o=t.forages,n=0;n<o.length;n++){var i=o[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,E(e).then(function(t){return e.db=t,T(e)?b(e):t}).then(function(n){e.db=t.db=n;for(var i=0;i<o.length;i++)o[i]._dbInfo.db=n}).catch(function(t){throw S(e,t),t})}(e).then(function(){K(e,t,o,n-1)})}).catch(o);o(i)}}var P={_driver:"asyncStorage",_initStorage:function(e){var t=this,o={db:null};if(e)for(var n in e)o[n]=e[n];var i=h[o.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},h[o.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=w);var r=[];function a(){return s.resolve()}for(var c=0;c<i.forages.length;c++){var d=i.forages[c];d!==t&&r.push(d._initReady().catch(a))}var u=i.forages.slice(0);return s.all(r).then(function(){return o.db=i.db,E(o)}).then(function(e){return o.db=e,T(o,t._defaultConfig.version)?b(o):e}).then(function(e){o.db=i.db=e,t._dbInfo=o;for(var n=0;n<u.length;n++){var r=u[n];r!==t&&(r._dbInfo.db=o.db,r._dbInfo.version=o.version)}})},_support:function(){try{if(!r)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var o=this,n=new s(function(t,n){o.ready().then(function(){K(o._dbInfo,_,function(i,r){if(i)return n(i);try{var a=r.objectStore(o._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var o=a.result;if(o){var n=o.value;A(n)&&(n=I(n));var i=e(n,o.key,s++);void 0!==i?t(i):o.continue()}else t()},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return c(n,t),n},getItem:function(e,t){var o=this;e=u(e);var n=new s(function(t,n){o.ready().then(function(){K(o._dbInfo,_,function(i,r){if(i)return n(i);try{var a=r.objectStore(o._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),A(e)&&(e=I(e)),t(e)},a.onerror=function(){n(a.error)}}catch(e){n(e)}})}).catch(n)});return c(n,t),n},setItem:function(e,t,o){var n=this;e=u(e);var i=new s(function(o,i){var r;n.ready().then(function(){return r=n._dbInfo,"[object Blob]"===g.call(t)?y(r.db).then(function(e){return e?t:function(e){return new s(function(t,o){var n=new FileReader;n.onerror=o,n.onloadend=function(o){var n=btoa(o.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)})}(t)}):t}).then(function(t){K(n._dbInfo,C,function(r,a){if(r)return i(r);try{var s=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),o(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return c(i,o),i},removeItem:function(e,t){var o=this;e=u(e);var n=new s(function(t,n){o.ready().then(function(){K(o._dbInfo,C,function(i,r){if(i)return n(i);try{var a=r.objectStore(o._dbInfo.storeName).delete(e);r.oncomplete=function(){t()},r.onerror=function(){n(a.error)},r.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return c(n,t),n},clear:function(e){var t=this,o=new s(function(e,o){t.ready().then(function(){K(t._dbInfo,C,function(n,i){if(n)return o(n);try{var r=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=r.error?r.error:r.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return c(o,e),o},length:function(e){var t=this,o=new s(function(e,o){t.ready().then(function(){K(t._dbInfo,_,function(n,i){if(n)return o(n);try{var r=i.objectStore(t._dbInfo.storeName).count();r.onsuccess=function(){e(r.result)},r.onerror=function(){o(r.error)}}catch(e){o(e)}})}).catch(o)});return c(o,e),o},key:function(e,t){var o=this,n=new s(function(t,n){e<0?t(null):o.ready().then(function(){K(o._dbInfo,_,function(i,r){if(i)return n(i);try{var a=r.objectStore(o._dbInfo.storeName),s=!1,c=a.openCursor();c.onsuccess=function(){var o=c.result;o?0===e?t(o.key):s?t(o.key):(s=!0,o.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}})}).catch(n)});return c(n,t),n},keys:function(e){var t=this,o=new s(function(e,o){t.ready().then(function(){K(t._dbInfo,_,function(n,i){if(n)return o(n);try{var r=i.objectStore(t._dbInfo.storeName).openCursor(),a=[];r.onsuccess=function(){var t=r.result;t?(a.push(t.key),t.continue()):e(a)},r.onerror=function(){o(r.error)}}catch(e){o(e)}})}).catch(o)});return c(o,e),o},dropInstance:function(e,t){t=l.apply(this,arguments);var o,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){var i=e.name===n.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):E(e).then(function(t){var o=h[e.name],n=o.forages;o.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t});o=e.storeName?i.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var o=t.version+1;m(e);var n=h[e.name],i=n.forages;t.close();for(var a=0;a<i.length;a++){var c=i[a];c._dbInfo.db=null,c._dbInfo.version=o}return new s(function(t,n){var i=r.open(e.name,o);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<i.length;t++){var o=i[t];o._dbInfo.db=e,N(o._dbInfo)}}).catch(function(t){throw(S(e,t)||s.resolve()).catch(function(){}),t})}}):i.then(function(t){m(e);var o=h[e.name],n=o.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new s(function(t,o){var n=r.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),o(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}}).then(function(e){o.db=e;for(var t=0;t<n.length;t++)N(n[t]._dbInfo)}).catch(function(t){throw(S(e,t)||s.resolve()).catch(function(){}),t})})}else o=s.reject("Invalid arguments");return c(o,t),o}};var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B="~~local_forage_type~",U=/^~~local_forage_type~([^~]+)~/,O="__lfsc__:",D=O.length,F="arbf",L="blob",k="si08",M="ui08",Y="uic8",x="si16",W="si32",H="ur16",G="ui32",j="fl32",V="fl64",q=D+F.length,J=Object.prototype.toString;function X(e){var t,o,n,i,r,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var d=new ArrayBuffer(a),u=new Uint8Array(d);for(t=0;t<s;t+=4)o=R.indexOf(e[t]),n=R.indexOf(e[t+1]),i=R.indexOf(e[t+2]),r=R.indexOf(e[t+3]),u[c++]=o<<2|n>>4,u[c++]=(15&n)<<4|i>>2,u[c++]=(3&i)<<6|63&r;return d}function z(e){var t,o=new Uint8Array(e),n="";for(t=0;t<o.length;t+=3)n+=R[o[t]>>2],n+=R[(3&o[t])<<4|o[t+1]>>4],n+=R[(15&o[t+1])<<2|o[t+2]>>6],n+=R[63&o[t+2]];return o.length%3==2?n=n.substring(0,n.length-1)+"=":o.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var Q={serialize:function(e,t){var o="";if(e&&(o=J.call(e)),e&&("[object ArrayBuffer]"===o||e.buffer&&"[object ArrayBuffer]"===J.call(e.buffer))){var n,i=O;e instanceof ArrayBuffer?(n=e,i+=F):(n=e.buffer,"[object Int8Array]"===o?i+=k:"[object Uint8Array]"===o?i+=M:"[object Uint8ClampedArray]"===o?i+=Y:"[object Int16Array]"===o?i+=x:"[object Uint16Array]"===o?i+=H:"[object Int32Array]"===o?i+=W:"[object Uint32Array]"===o?i+=G:"[object Float32Array]"===o?i+=j:"[object Float64Array]"===o?i+=V:t(new Error("Failed to get type for BinaryArray"))),t(i+z(n))}else if("[object Blob]"===o){var r=new FileReader;r.onload=function(){var o=B+e.type+"~"+z(this.result);t(O+L+o)},r.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}},deserialize:function(e){if(e.substring(0,D)!==O)return JSON.parse(e);var t,o=e.substring(q),n=e.substring(D,q);if(n===L&&U.test(o)){var i=o.match(U);t=i[1],o=o.substring(i[0].length)}var r=X(o);switch(n){case F:return r;case L:return a([r],{type:t});case k:return new Int8Array(r);case M:return new Uint8Array(r);case Y:return new Uint8ClampedArray(r);case x:return new Int16Array(r);case H:return new Uint16Array(r);case W:return new Int32Array(r);case G:return new Uint32Array(r);case j:return new Float32Array(r);case V:return new Float64Array(r);default:throw new Error("Unkown type: "+n)}},stringToBuffer:X,bufferToString:z};function Z(e,t,o,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],o,n)}function $(e,t,o,n,i,r){e.executeSql(o,n,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[name],function(e,s){s.rows.length?r(e,a):Z(e,t,function(){e.executeSql(o,n,i,r)},r)},r):r(e,a)},r)}var ee={_driver:"webSQLStorage",_initStorage:function(e){var t=this,o={db:null};if(e)for(var n in e)o[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new s(function(e,n){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(e){return n(e)}o.db.transaction(function(i){Z(i,o,function(){t._dbInfo=o,e()},function(e,t){n(t)})},n)});return o.serializer=Q,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var o=this,n=new s(function(t,n){o.ready().then(function(){var i=o._dbInfo;i.db.transaction(function(o){$(o,i,"SELECT * FROM "+i.storeName,[],function(o,n){for(var r=n.rows,a=r.length,s=0;s<a;s++){var c=r.item(s),d=c.value;if(d&&(d=i.serializer.deserialize(d)),void 0!==(d=e(d,c.key,s+1)))return void t(d)}t()},function(e,t){n(t)})})}).catch(n)});return c(n,t),n},getItem:function(e,t){var o=this;e=u(e);var n=new s(function(t,n){o.ready().then(function(){var i=o._dbInfo;i.db.transaction(function(o){$(o,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,o){var n=o.rows.length?o.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return c(n,t),n},setItem:function(e,t,o){return function e(t,o,n,i){var r=this;t=u(t);var a=new s(function(a,s){r.ready().then(function(){void 0===o&&(o=null);var c=o,d=r._dbInfo;d.serializer.serialize(o,function(o,u){u?s(u):d.db.transaction(function(e){$(e,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[t,o],function(){a(c)},function(e,t){s(t)})},function(o){if(o.code===o.QUOTA_ERR){if(i>0)return void a(e.apply(r,[t,c,n,i-1]));s(o)}})})}).catch(s)});return c(a,n),a}.apply(this,[e,t,o,1])},removeItem:function(e,t){var o=this;e=u(e);var n=new s(function(t,n){o.ready().then(function(){var i=o._dbInfo;i.db.transaction(function(o){$(o,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return c(n,t),n},clear:function(e){var t=this,o=new s(function(e,o){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){$(t,n,"DELETE FROM "+n.storeName,[],function(){e()},function(e,t){o(t)})})}).catch(o)});return c(o,e),o},length:function(e){var t=this,o=new s(function(e,o){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){$(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,o){var n=o.rows.item(0).c;e(n)},function(e,t){o(t)})})}).catch(o)});return c(o,e),o},key:function(e,t){var o=this,n=new s(function(t,n){o.ready().then(function(){var i=o._dbInfo;i.db.transaction(function(o){$(o,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,o){var n=o.rows.length?o.rows.item(0).key:null;t(n)},function(e,t){n(t)})})}).catch(n)});return c(n,t),n},keys:function(e){var t=this,o=new s(function(e,o){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){$(t,n,"SELECT key FROM "+n.storeName,[],function(t,o){for(var n=[],i=0;i<o.rows.length;i++)n.push(o.rows.item(i).key);e(n)},function(e,t){o(t)})})}).catch(o)});return c(o,e),o},dropInstance:function(e,t){t=l.apply(this,arguments);var o=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||o.name,e.storeName=e.storeName||o.storeName);var n,i=this;return c(n=e.name?new s(function(t){var n;n=e.name===o.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(function(e){return new s(function(t,o){e.transaction(function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(o,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).name);t({db:e,storeNames:i})},function(e,t){o(t)})},function(e){o(e)})})}(n))}).then(function(e){return new s(function(t,o){e.db.transaction(function(n){function i(e){return new s(function(t,o){n.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){o(t)})})}for(var r=[],a=0,c=e.storeNames.length;a<c;a++)r.push(i(e.storeNames[a]));s.all(r).then(function(){t()}).catch(function(e){o(e)})},function(e){o(e)})})}):s.reject("Invalid arguments"),t),n}};function te(e,t){var o=e.name+"/";return e.storeName!==t.storeName&&(o+=e.storeName+"/"),o}function oe(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var ne={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=te(e,this._defaultConfig),oe()?(this._dbInfo=t,t.serializer=Q,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var o=this,n=o.ready().then(function(){for(var t=o._dbInfo,n=t.keyPrefix,i=n.length,r=localStorage.length,a=1,s=0;s<r;s++){var c=localStorage.key(s);if(0===c.indexOf(n)){var d=localStorage.getItem(c);if(d&&(d=t.serializer.deserialize(d)),void 0!==(d=e(d,c.substring(i),a++)))return d}}});return c(n,t),n},getItem:function(e,t){var o=this;e=u(e);var n=o.ready().then(function(){var t=o._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return c(n,t),n},setItem:function(e,t,o){var n=this;e=u(e);var i=n.ready().then(function(){void 0===t&&(t=null);var o=t;return new s(function(i,r){var a=n._dbInfo;a.serializer.serialize(t,function(t,n){if(n)r(n);else try{localStorage.setItem(a.keyPrefix+e,t),i(o)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})});return c(i,o),i},removeItem:function(e,t){var o=this;e=u(e);var n=o.ready().then(function(){var t=o._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return c(n,t),n},clear:function(e){var t=this,o=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,o=localStorage.length-1;o>=0;o--){var n=localStorage.key(o);0===n.indexOf(e)&&localStorage.removeItem(n)}});return c(o,e),o},length:function(e){var t=this.keys().then(function(e){return e.length});return c(t,e),t},key:function(e,t){var o=this,n=o.ready().then(function(){var t,n=o._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return c(n,t),n},keys:function(e){var t=this,o=t.ready().then(function(){for(var e=t._dbInfo,o=localStorage.length,n=[],i=0;i<o;i++){var r=localStorage.key(i);0===r.indexOf(e.keyPrefix)&&n.push(r.substring(e.keyPrefix.length))}return n});return c(o,e),o},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var o=this.config();e.name=e.name||o.name,e.storeName=e.storeName||o.storeName}var n,i=this;return c(n=e.name?new s(function(t){e.storeName?t(te(e,i._defaultConfig)):t(e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var o=localStorage.key(t);0===o.indexOf(e)&&localStorage.removeItem(o)}}):s.reject("Invalid arguments"),t),n}},ie=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},re=function(e,t){for(var o=e.length,n=0;n<o;){if(ie(e[n],t))return!0;n++}return!1},ae=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},se={},ce={},de={INDEXEDDB:P,WEBSQL:ee,LOCALSTORAGE:ne},ue=[de.INDEXEDDB._driver,de.WEBSQL._driver,de.LOCALSTORAGE._driver],le=["dropInstance"],fe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),pe={description:"",driver:ue.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function he(e,t){e[t]=function(){var o=arguments;return e.ready().then(function(){return e[t].apply(e,o)})}}function ge(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var o in t)t.hasOwnProperty(o)&&(ae(t[o])?arguments[0][o]=t[o].slice():arguments[0][o]=t[o])}return arguments[0]}var _e=new(function(){function e(t){for(var o in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),de)if(de.hasOwnProperty(o)){var n=de[o],i=n._driver;this[o]=i,se[i]||this.defineDriver(n)}this._defaultConfig=ge({},pe),this._config=ge({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,o){var n=new s(function(t,o){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void o(i);for(var r=fe.concat("_initStorage"),a=0,d=r.length;a<d;a++){var u=r[a];if((!re(le,u)||e[u])&&"function"!=typeof e[u])return void o(i)}(function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),o=s.reject(t);return c(o,arguments[arguments.length-1]),o}},o=0,n=le.length;o<n;o++){var i=le[o];e[i]||(e[i]=t(i))}})();var l=function(o){se[n]&&console.info("Redefining LocalForage driver: "+n),se[n]=e,ce[n]=o,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(l,o):l(!!e._support):l(!0)}catch(e){o(e)}});return d(n,t,o),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,o){var n=se[e]?s.resolve(se[e]):s.reject(new Error("Driver not found."));return d(n,t,o),n},e.prototype.getSerializer=function(e){var t=s.resolve(Q);return d(t,e),t},e.prototype.ready=function(e){var t=this,o=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return d(o,e,e),o},e.prototype.setDriver=function(e,t,o){var n=this;ae(e)||(e=[e]);var i=this._getSupportedDrivers(e);function r(){n._config.driver=n.driver()}function a(e){return n._extend(e),r(),n._ready=n._initStorage(n._config),n._ready}var c=null!==this._driverSet?this._driverSet.catch(function(){return s.resolve()}):s.resolve();return this._driverSet=c.then(function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(function(e){n._driver=e._driver,r(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function o(){for(;t<e.length;){var i=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(a).catch(o)}r();var c=new Error("No available storage method found.");return n._driverSet=s.reject(c),n._driverSet}()}}(i)})}).catch(function(){r();var e=new Error("No available storage method found.");return n._driverSet=s.reject(e),n._driverSet}),d(this._driverSet,t,o),this._driverSet},e.prototype.supports=function(e){return!!ce[e]},e.prototype._extend=function(e){ge(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],o=0,n=e.length;o<n;o++){var i=e[o];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=fe.length;e<t;e++)he(this,fe[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=_e},{3:3}]},{},[4])(4)}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},["AppComponent","Constants","ConfigUtil","ResourceUtil","StorageUtils","localforage","ApplePartsControlComponent","FallingControlComponent","GiftComponent","StageProgressBarComponent","JSInterfaceUtils","PlatformCallJS","ContinueComponent","DoneComponent","MainControlComponent","AppleControlComponent","BoardControlComponent","BoardPartsControlComponent","KnifeControlComponent","PlayStageControlComponent","RemainedKnifesComponent","SettingComponent","SwitchControlComponent","KnifeWarehouseComponent","KnifeWarehousePageViewComponent","LotteryComponent","RewardComponent"]);