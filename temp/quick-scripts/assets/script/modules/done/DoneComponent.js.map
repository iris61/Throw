{"version":3,"sources":["DoneComponent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/script/modules/done","sourcesContent":["import AppComponent from \"../../AppComponent\";\nimport StorageUtils from \"../../utils/StorageUtils\";\nimport ResourceUtil from \"../../utils/ResourceUtil\";\nimport { Constants } from \"../../Constants\";\nimport JSInterfaceUtils from \"../bridge/JSInterfaceUtils\";\nimport GiftComponent from \"../../components/GiftComponent\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class DoneComponent extends cc.Component {\n\n    @property(cc.Sprite)\n    bestRecordBackground: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    coinIcon: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    adsOrWarehouseIcon: cc.Sprite = null;\n\n    @property(cc.Label)\n    currencyLabel: cc.Label = null;\n\n    @property(cc.Label)\n    stageLabel: cc.Label = null;\n\n    @property(cc.Label)\n    scoreLabel: cc.Label = null;\n\n    @property(cc.Label)\n    adsOrWarehouseLabel: cc.Label = null;\n\n    @property(cc.Button)\n    adsOrWarehouseButton: cc.Button = null;\n\n    @property(cc.Button)\n    restartButton: cc.Button = null;\n\n    @property(cc.Button)\n    settingButton: cc.Button = null;\n\n    @property(cc.Button)\n    homeButton: cc.Button = null;\n\n    @property(cc.Button)\n    shopButton: cc.Button = null;\n\n    @property(cc.Button)\n    giftButton: cc.Button = null;\n\n    @property(cc.Sprite)\n    adSprite: cc.Sprite = null;\n\n    private static instance: DoneComponent = null;\n\n    private appNode: cc.Node = null;\n\n    private stageTitle: string = \"STAGE 1\";\n\n    private score: number = 0;\n\n    onLoad() {\n        this.stageLabel.string = this.stageTitle;\n        this.scoreLabel.string = String(this.score);\n        this.currencyLabel.getComponent(cc.Label).string = StorageUtils.shared.getString(Constants.KEY_CURRENCY, \"0\");\n\n        this.homeButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.homeButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            this.appNode.getComponent(AppComponent).jumpToMainPage();\n\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_Icon_Clicked\", \"which_icon\", \"home\");\n        }, this);\n\n        this.shopButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.shopButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            this.appNode.getComponent(AppComponent).jumpToWarehousePage();\n\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_Icon_Clicked\", \"which_icon\", \"store\");\n        }, this);\n\n        this.settingButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.settingButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            this.appNode.getComponent(AppComponent).jumpToSettingPage();\n\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_Icon_Clicked\", \"which_icon\", \"setting\");\n        }, this);\n\n        this.restartButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.restartButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            this.appNode.getComponent(AppComponent).jumpToPlayStage();\n\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_Restart_Clicked\", \"first_button\",\n                this.adsOrWarehouseLabel.string == \"MORE KINIVES\" ? \"more_knives\" : \"free_coins\");\n            \n            JSInterfaceUtils.logAutopilotEvent(\"play_game_click\");\n        }, this);\n\n        let bestScore: number = StorageUtils.shared.getInt(Constants.KEY_BEST_SCORE, 0);\n        if (bestScore < this.score) {\n            bestScore = this.score;\n            StorageUtils.shared.putInt(Constants.KEY_BEST_SCORE, this.score);\n\n            this.bestRecordBackground.node.opacity = 255;\n        } else {\n            this.bestRecordBackground.node.opacity = 0;\n        }\n\n        if (StorageUtils.shared.getBoolean(Constants.KEY_DONE_PAGE_SHOWN, false)) {\n            this.coinIcon.node.opacity = 255;\n            this.adSprite.node.opacity = 255;\n            this.adsOrWarehouseLabel.string = \"FREE COINS\";\n\n            ResourceUtil.loadSpriteRes(\"done/video\", (error: Error, resource: cc.SpriteFrame) => {\n                this.adsOrWarehouseIcon.spriteFrame = resource;\n            });\n\n            this.adsOrWarehouseButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n                if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                    cc.audioEngine.playEffect(this.adsOrWarehouseButton.getComponent(cc.AudioSource).clip, false);\n                }\n\n                JSInterfaceUtils.watchRewardAd(Constants.POSTION_DONE_GET_COINS, Constants.WATCH_AD_FOR_CURRENCY);\n\n                JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_First_Button_Clicked\", \"first_button\",\n                    this.adsOrWarehouseLabel.string == \"MORE KINIVES\" ? \"more_knives\" : \"free_coins\");\n            }, this);\n        } else {\n            this.coinIcon.node.opacity = 0;\n            this.adSprite.node.opacity = 0;\n            this.adsOrWarehouseLabel.string = \"MORE KINIVES\";\n\n            ResourceUtil.loadSpriteRes(\"done/knives\", (error: Error, resource: cc.SpriteFrame) => {\n                this.adsOrWarehouseIcon.spriteFrame = resource;\n            });\n\n            this.adsOrWarehouseButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n                if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                    cc.audioEngine.playEffect(this.adsOrWarehouseButton.getComponent(cc.AudioSource).clip, false);\n                }\n\n                this.appNode.getComponent(AppComponent).jumpToWarehousePage();\n\n                JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_First_Button_Clicked\", \"first_button\",\n                    this.adsOrWarehouseLabel.string == \"MORE KINIVES\" ? \"more_knives\" : \"free_coins\");\n            }, this);\n\n            StorageUtils.shared.putBoolean(Constants.KEY_DONE_PAGE_SHOWN, true);\n        }\n\n        this.giftButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_Icon_Clicked\", \"which_icon\", \"gift\");\n        }, this);\n\n    }\n\n    start() {\n        DoneComponent.logFlurryDonePageViewed();\n    }\n\n    public init(stage: number, score: number, appNode: cc.Node): void {\n        this.stageTitle = Constants.PREFIX_STAGE_TITLE + stage;\n        this.score = score;\n        this.appNode = appNode;\n\n        DoneComponent.instance = this;\n    }\n\n    public static watchAdForCurrency(): void {\n        if (!DoneComponent.instance) {\n            return;\n        }\n\n        let currency = StorageUtils.shared.getInt(Constants.KEY_CURRENCY, 0);\n        currency = currency + Constants.AD_PRICE;\n        DoneComponent.instance.currencyLabel.getComponent(cc.Label).string = String(currency);\n        StorageUtils.shared.putInt(Constants.KEY_CURRENCY, currency);\n    }\n\n    public static logFlurryDonePageViewed(): void {\n        JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Done_Page_Viewed\", \"first_button\",\n            DoneComponent.instance.adsOrWarehouseLabel.string == \"MORE KINIVES\" ? \"more_knives\" : \"free_coins\",\n            \"gift_status\", DoneComponent.instance.giftButton.getComponent(GiftComponent).isReady() ? \"ready\" : \"not_ready\");\n\n        JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Life_Time_per_Play_Game\", \"game_time\",\n            String(Math.ceil((new Date().getTime() - StorageUtils.shared.getInt(Constants.KEY_ENTER_PLAY_TIME)) / 1000)),\n            \"game_over_stage\", String(DoneComponent.instance.appNode.getComponent(AppComponent).getCurrentStage()));\n    }\n\n}\n"]}