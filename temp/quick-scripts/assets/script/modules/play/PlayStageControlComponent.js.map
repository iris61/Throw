{"version":3,"sources":["PlayStageControlComponent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/script/modules/play","sourcesContent":["import KnifeControlComponent from \"./KnifeControlComponent\";\nimport BoardControlComponent, { NODE_NAME_BOARD } from \"./BoardControlComponent\";\nimport RemainedKnifesComponent from \"./RemainedKnifesComponent\";\nimport AppleControlComponent from \"./AppleControlComponent\";\nimport ApplePartsControlComponent from \"../../components/ApplePartsControlComponent\";\nimport BoardPartsControlComponent from \"./BoardPartsControlComponent\";\nimport AppComponent from \"../../AppComponent\";\nimport StageProgressBarComponent from \"../../components/StageProgressBarComponent\";\nimport JSInterfaceUtils from \"../bridge/JSInterfaceUtils\";\nimport ResourceUtil from \"../../utils/ResourceUtil\";\nimport StorageUtils from \"../../utils/StorageUtils\";\nimport { Constants } from \"../../Constants\";\nimport ConfigUtil from \"../../utils/ConfigUtil\";\n\nexport const NODE_NAME_BACKGROUND = \"background\";\n\nconst NODE_NAME_GIFT_COIN_COUNT = \"gift_coin_count\";\nconst NODE_NAME_GIFT_COIN_COUNT_CONTAINER = \"gift_coin_count_container\";\n\nconst GROUP_NAME_DEFAULT = \"default\";\nconst COINS_REWARD_ALL_STAGES_WIN = 500;\n\nconst { ccclass, property } = cc._decorator;\n\nclass Knifes {\n    public count: number = 8;\n    public presetKnifes: {\n        resourceUrl: string,\n        position: number,\n        length: number,\n        insertLength: number\n    }[] = [];\n\n    private knifeNodesPool: cc.NodePool = new cc.NodePool();\n    private userKnifeNodes: cc.Node[] = [];\n    private presetKnifesNodes: cc.Node[] = [];\n\n    private userKnifeResourceUrl: string = null;\n\n    private currentKnifeIndex: number = 0;\n    private userKnifeRealLength: number = 420;\n    private userKnifeInsertedLength: number = 240;\n\n    public pushKnifeNodes(knifePrefab: cc.Prefab, boardContainerNode: cc.Node, backgroundNode: cc.Node, stageNode: cc.Node): void {\n        for (let i = 0; i < this.count; i++) {\n            let knifeNode: cc.Node = this.knifeNodesPool.size() == 0 ?\n                cc.instantiate(knifePrefab) :\n                this.knifeNodesPool.get();\n\n            ResourceUtil.loadSpriteRes(this.userKnifeResourceUrl, (error: Error, resource: cc.SpriteFrame) => {\n                knifeNode.getComponent(cc.Sprite).spriteFrame = resource;\n            });\n\n            knifeNode.getComponent(KnifeControlComponent).boardContainerNode = boardContainerNode;\n            knifeNode.getComponent(KnifeControlComponent).stageNode = stageNode;\n            knifeNode.getComponent(KnifeControlComponent).knifeRealLength = this.userKnifeRealLength;\n            knifeNode.getComponent(KnifeControlComponent).knifeInsertLength = this.userKnifeInsertedLength;\n            knifeNode.setPosition(0, -backgroundNode.getContentSize().height / 2 + 100);\n\n            this.userKnifeNodes.push(knifeNode);\n        }\n    }\n\n    public getCurrentKnifeNode(): cc.Node {\n        if (this.currentKnifeIndex < this.count) {\n            return this.userKnifeNodes[this.currentKnifeIndex];\n        }\n        return null;\n    }\n\n    public getNextKnifeNode(): cc.Node {\n        if (this.currentKnifeIndex + 1 < this.count) {\n            return this.userKnifeNodes[this.currentKnifeIndex + 1];\n        }\n        return null;\n    }\n\n    public moveToNextKnife(): void {\n        this.currentKnifeIndex++;\n    }\n\n    public rollbackKnife(): void {\n        this.currentKnifeIndex--;\n    }\n\n    public getUserKnifes(): cc.Node[] {\n        return this.userKnifeNodes;\n    }\n\n    public getPresetKnifes(): cc.Node[] {\n        return this.presetKnifesNodes;\n    }\n\n    public pushPresetKnifeNodes(knifePrefab: cc.Prefab, boardContainerNode: cc.Node, stageNode: cc.Node): void {\n        for (let i = 0; i < this.presetKnifes.length; i++) {\n            let presetKnife: cc.Node = this.knifeNodesPool.size() == 0 ?\n                cc.instantiate(knifePrefab) :\n                this.knifeNodesPool.get();\n\n            this.presetKnifesNodes.push(presetKnife);\n            presetKnife.getComponent(KnifeControlComponent).boardContainerNode = boardContainerNode;\n            presetKnife.getComponent(KnifeControlComponent).stageNode = stageNode;\n            presetKnife.getComponent(KnifeControlComponent).knifeRealLength = this.presetKnifes[i].length;\n            presetKnife.getComponent(KnifeControlComponent).knifeInsertLength = this.presetKnifes[i].insertLength;\n\n            presetKnife.getComponent(KnifeControlComponent).addToBoard(this.presetKnifes[i].resourceUrl, this.presetKnifes[i].position);\n        }\n    }\n\n    public setUserKnifeResourceUrl(userKnifeResourceUrl: string): void {\n        this.userKnifeResourceUrl = userKnifeResourceUrl;\n    }\n\n    public setUserKnifeRealLength(userKnifeRealLength: number): void {\n        this.userKnifeRealLength = userKnifeRealLength;\n    }\n\n    public setUserKnifeInsertedLength(userKnifeInsertedLength: number): void {\n        this.userKnifeInsertedLength = userKnifeInsertedLength;\n    }\n\n    public reset(): void {\n        for (let i = 0; i < this.userKnifeNodes.length; i++) {\n            this.userKnifeNodes[i].getComponent(KnifeControlComponent).reset();\n            this.knifeNodesPool.put(this.userKnifeNodes[i]);\n        }\n\n        for (let i = 0; i < this.presetKnifesNodes.length; i++) {\n            this.presetKnifesNodes[i].getComponent(KnifeControlComponent).reset();\n            this.knifeNodesPool.put(this.presetKnifesNodes[i]);\n        }\n\n        this.userKnifeNodes = [];\n        this.presetKnifesNodes = [];\n        this.currentKnifeIndex = 0;\n    }\n}\n\nclass Board {\n    public resourceUrl: string;\n\n    public rotation: {\n        targetSpeed: number,\n        interpolator: string,\n        interval: number\n    }[] = [];\n\n    public init(boardContainerNode: cc.Node, boardNode: cc.Node, isBossStage: boolean): void {\n        ResourceUtil.loadSpriteRes(this.resourceUrl, (error: Error, resource: cc.SpriteFrame) => {\n            boardNode.getComponent(cc.Sprite).spriteFrame = resource;\n\n            if (!isBossStage) {\n                boardContainerNode.opacity = 255;\n            }\n        });\n        boardContainerNode.getComponent(BoardControlComponent).setRotationSpeed(this.rotation);\n    }\n}\n\nclass Apples {\n    public strategy: string;\n\n    public items: {\n        resourceUrl: string,\n        position: number\n    }[] = [];\n\n    public appleNodes: cc.Node[] = [];\n\n    private appleNodesPool: cc.NodePool = new cc.NodePool();\n\n    public pushAppleNodes(applePrefab: cc.Prefab, boardContainerNode: cc.Node, boardNode: cc.Node, stageNode: cc.Node) {\n        for (let i = 0; i < this.items.length; i++) {\n            let appleNode: cc.Node = this.appleNodesPool.size() == 0 ?\n                cc.instantiate(applePrefab) :\n                this.appleNodesPool.get();\n\n            ResourceUtil.loadSpriteRes(this.items[i].resourceUrl, (error: Error, resource: cc.SpriteFrame) => {\n                appleNode.getComponent(cc.Sprite).spriteFrame = resource;\n            });\n\n            let radius: number = boardNode.width / 2 - 15;\n            appleNode.getComponent(AppleControlComponent).setPlayStageNode(stageNode);\n            appleNode.setPosition(\n                radius * Math.sin(this.items[i].position / 360 * 2 * Math.PI),\n                radius * Math.cos(this.items[i].position / 360 * 2 * Math.PI));\n            appleNode.rotation = this.items[i].position;\n            boardNode.addChild(appleNode);\n\n            this.appleNodes.push(appleNode);\n        }\n    }\n\n    public rollback(appleNode: cc.Node) {\n        if (this.appleNodes.indexOf(appleNode) != -1) {\n            appleNode.removeFromParent();\n            this.appleNodes.splice(this.appleNodes.indexOf(appleNode), 1);\n            this.appleNodesPool.put(appleNode);\n        }\n    }\n\n    public reset(): void {\n        for (let i = 0; i < this.appleNodes.length; i++) {\n            this.appleNodes[i].removeFromParent();\n            this.appleNodesPool.put(this.appleNodes[i]);\n        }\n        this.appleNodes = [];\n    }\n}\n\n@ccclass\nexport default class PlayStageControlComponent extends cc.Component {\n\n    @property(cc.Node)\n    boardContainerNode: cc.Node = null;\n\n    @property(cc.Node)\n    boardNode: cc.Node = null;\n\n    @property(cc.Node)\n    backgroundNode: cc.Node = null;\n\n    @property(cc.Node)\n    remainedKnifesLayoutNode: cc.Node = null;\n\n    @property(cc.Node)\n    stageProgressBarLayoutNode: cc.Node = null;\n\n    @property(cc.Node)\n    knifeShowAnimNode: cc.Node = null;\n\n    @property(cc.Node)\n    rewardCoinShowAnimNode: cc.Node = null;\n\n    @property(cc.Node)\n    rewardCoinLabel: cc.Node = null;\n\n    @property(cc.Node)\n    rewardDialogNode: cc.Node = null;\n\n    @property(cc.Node)\n    rewardDialogBackgroundNode: cc.Node = null;\n\n    @property(cc.Node)\n    sparkNode: cc.Node = null;\n\n    @property(cc.Node)\n    rewardKnifeNode: cc.Node = null;\n\n    @property(cc.Node)\n    giftMask: cc.Node = null;\n\n    @property(cc.Prefab)\n    boardPartsPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    knifePrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    applePrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    applePartsPrefab: cc.Prefab = null;\n\n    @property(cc.Label)\n    currencyLabel: cc.Label = null;\n\n    @property(cc.Label)\n    scoreLabel: cc.Label = null;\n\n    @property(cc.Label)\n    stageLabel: cc.Label = null;\n\n    @property(cc.Label)\n    bossNameLabel: cc.Label = null;\n\n    @property(cc.Button)\n    equipButton: cc.Button = null;\n\n    @property(cc.Button)\n    rewardDialogCloseButton: cc.Button = null;\n\n    @property(cc.AudioClip)\n    knifeThrowAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    hitNormalBoardAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    hitAppleAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    boardBreakAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    bossBoardBreakAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    bossAppearAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    bossDefeatedAudio: cc.AudioClip = null;\n\n    @property(cc.AudioClip)\n    getKnifeAudio: cc.AudioClip = null;\n\n    private knifes: Knifes = null;\n    private apples: Apples = null;\n    private board: Board = null;\n\n    private boardNodePool: cc.NodePool = null;\n    private applePartsNodePool: cc.NodePool = null;\n\n    private applePartsNodes: cc.Node[] = [];\n    private giftApples: cc.Node[] = [];\n    private appNode: cc.Node = null;\n    private nextKnifeNode: cc.Node = null;\n    private currentKnifeNode: cc.Node = null;\n    private boardPartsNode: cc.Node = null;\n\n    private stageTitle: string = \"\";\n    private boss: string = \"\";\n    private rewardKnifeId: string = \"\";\n    private bossHitAudioResource: string = \"\";\n\n    private score: number = 0;\n    private fallKnifesCount: number = 0;\n    private stage: number = 1;\n    private stageboss: number = 1;\n\n    private isBossStage: boolean = false;\n    private hasThrownKnifes: boolean = false;\n    private hasRewardKnife: boolean = false;\n    private isMaskShow: boolean = false;\n\n    onLoad() {\n        this.boardNodePool = new cc.NodePool();\n        this.applePartsNodePool = new cc.NodePool();\n\n        this.remainedKnifesLayoutNode.getComponent(RemainedKnifesComponent).loadRes();\n    }\n\n    start() {\n    }\n\n    // update (dt) {}\n\n    // 为了更方便检查错误以及更方便修改json文件，在这里把json文件转换成能用语法检查出错误的结构，如果修改了json文件格式，只需要在这里修改即可\n    public init(appNode: cc.Node, stage: number, stageboss: number, score: number, hasRewardKnife: boolean): void {\n        this.stage = stage;\n        this.stageboss = stageboss;\n        let stageId: string = ConfigUtil.shared.getStageIdByIndex(stage, stageboss);\n\n        this.isBossStage = stage % Constants.INTERVAL_BOSS_STAGE == 0;\n        this.hasRewardKnife = hasRewardKnife;\n\n        if (this.isBossStage) {\n            this.boss = ConfigUtil.shared.getBossName(stageboss);\n            this.rewardKnifeId = ConfigUtil.shared.getBossRewardKnife(stageboss);\n            this.bossHitAudioResource = ConfigUtil.shared.getBossHitAudioResourceUrl(stageboss);\n        }\n\n        this.stageTitle = (this.isBossStage ? \"BOSS: \" + this.boss : Constants.PREFIX_STAGE_TITLE + stage);\n\n        this.appNode = appNode;\n\n        this.score = score;\n        this.scoreLabel.string = String(this.score);\n\n        if (!this.knifes) {\n            this.knifes = new Knifes();\n        }\n        this.knifes.count = ConfigUtil.shared.getPlayStageUserKnifesCount(stageId);\n\n        let userKnifeId: string = StorageUtils.shared.getString(Constants.KEY_USER_KNIFE, Constants.DEFAULT_USER_KNIFE_ID);\n        this.knifes.setUserKnifeResourceUrl(ConfigUtil.shared.getKnifeResourceUrl(userKnifeId));\n        this.knifes.setUserKnifeInsertedLength(ConfigUtil.shared.getKnifeInsertLength(userKnifeId));\n        this.knifes.setUserKnifeRealLength(ConfigUtil.shared.getKnifeLength(userKnifeId));\n\n        this.knifes.presetKnifes = [];\n        for (let i = 0; i < ConfigUtil.shared.getPresetKnifesArray(stageId).length; i++) {\n            let presetKnifeId: string = ConfigUtil.shared.getPresetKnifeId(stageId, i);\n\n            this.knifes.presetKnifes.push({\n                resourceUrl: ConfigUtil.shared.getKnifeResourceUrl(presetKnifeId),\n                position: ConfigUtil.shared.getPresetKnifePositionAngle(stageId, i),\n                length: ConfigUtil.shared.getKnifeLength(presetKnifeId),\n                insertLength: ConfigUtil.shared.getKnifeInsertLength(presetKnifeId)\n            });\n        }\n\n        if (!this.apples) {\n            this.apples = new Apples();\n        }\n        this.apples.items = [];\n\n        for (let i = 0; i < ConfigUtil.shared.getPresetApplesArray(stageId).length; i++) {\n            let appleId: string = ConfigUtil.shared.getPresetAppleId(stageId, i);\n\n            this.apples.items.push({\n                resourceUrl: ConfigUtil.shared.getAppleResourceUrl(appleId),\n                position: ConfigUtil.shared.getPresetApplePositionAngle(stageId, i)\n            });\n        }\n\n        if (this.boardNodePool && this.boardNodePool.size() > 0) {\n            this.boardNode = this.boardNodePool.get();\n            this.boardContainerNode.addChild(this.boardNode);\n        }\n\n        this.board = new Board();\n        let boardId: string = ConfigUtil.shared.getBoardId(stageId);\n        this.board.resourceUrl = ConfigUtil.shared.getBoardResourceUrl(boardId);\n        this.board.rotation = ConfigUtil.shared.getBoardRotation(stageId);\n        this.board.init(this.boardContainerNode, this.boardNode, this.isBossStage);\n\n        this.setUpPlayStage();\n    }\n\n    public onKnifeFall(): void {\n        this.fallKnifesCount++;\n\n        if (this.fallKnifesCount >= this.knifes.count + this.knifes.presetKnifes.length) {\n            if (this.isBossStage && !this.hasRewardKnife) {\n                let gainedKnifes: Array<string> = StorageUtils.shared.getString(Constants.KEY_USER_GAINED_KNIFES, \"\").split(\",\");\n\n                if (gainedKnifes.indexOf(this.rewardKnifeId) == -1) {\n                    this.equipButton.getComponent(cc.Button).enabled = true;\n\n                    gainedKnifes.push(this.rewardKnifeId);\n                    StorageUtils.shared.putString(Constants.KEY_USER_GAINED_KNIFES, String(gainedKnifes));\n\n                    if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                        cc.audioEngine.playEffect(this.getKnifeAudio, false);\n                    }\n\n                    ResourceUtil.loadSpriteRes(ConfigUtil.shared.getKnifeResourceUrl(this.rewardKnifeId), (error: Error, resource: cc.SpriteFrame) => {\n                        this.rewardKnifeNode.getComponent(cc.Sprite).spriteFrame = resource;\n                        this.bossNameLabel.getComponent(cc.Label).string = this.boss;\n\n                        this.rewardDialogNode.opacity = 255;\n                        this.rewardDialogNode.getComponent(cc.BlockInputEvents).enabled = true;\n\n                        this.rewardDialogCloseButton.getComponent(cc.Button).node.on(cc.Node.EventType.TOUCH_END, () => {\n                            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                                cc.audioEngine.playEffect(this.rewardDialogCloseButton.getComponent(cc.AudioSource).clip, false);\n                            }\n\n                            this.jumpToNextStage(this.score, this.stageboss, true);\n\n                            this.equipButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END);\n                            this.rewardDialogCloseButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END);\n                            this.rewardDialogNode.getComponent(cc.BlockInputEvents).enabled = false;\n\n                            this.rewardDialogNode.opacity = 0;\n                            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Reward_Card_Clicked\", \"operation\", \"cancel\");\n                        }, this);\n\n                        this.equipButton.getComponent(cc.Button).node.on(cc.Node.EventType.TOUCH_END, () => {\n                            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                                cc.audioEngine.playEffect(this.equipButton.getComponent(cc.AudioSource).clip, false);\n                            }\n\n                            for (let i = 0; i < this.knifes.getUserKnifes().length; i++) {\n                                this.knifes.getUserKnifes()[i].getComponent(cc.Sprite).spriteFrame = resource;\n                            }\n\n                            StorageUtils.shared.putString(Constants.KEY_USER_KNIFE, this.rewardKnifeId);\n                            this.jumpToNextStage(this.score, this.stageboss, true);\n                            \n                            this.equipButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END);\n                            this.rewardDialogCloseButton.getComponent(cc.Button).node.off(cc.Node.EventType.TOUCH_END);\n                            this.rewardDialogNode.getComponent(cc.BlockInputEvents).enabled = false;\n\n                            this.rewardDialogNode.opacity = 0;\n                            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Reward_Card_Clicked\", \"operation\", \"equip\");\n                        }, this);\n\n                        JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Reward_Card_Viewed\");\n                        JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Knives_Unlock\", \"method\", \"boss\", \"which_knives\", this.rewardKnifeId);\n                    });\n                } else {\n                    this.jumpToNextStage(this.score, this.stageboss, this.hasRewardKnife);;\n                }\n            } else {\n                this.jumpToNextStage(this.score, this.stageboss, this.hasRewardKnife);\n            }\n        }\n    }\n\n    public onStageFailed(): void {\n        this.fallKnifesCount = 0;\n        this.appNode.getComponent(AppComponent).jumpToContinuePage(this.stage, this.score);\n    }\n\n    public onStageFinished(): void {\n        this.boardContainerNode.getComponent(BoardControlComponent).stopRotation();\n        this.boardContainerNode.rotation = 0;\n\n        if (!this.isBossStage) {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.boardBreakAudio, false);\n            }\n\n            let boardPos: cc.Vec2 = this.boardContainerNode.getPosition();\n\n            if (!this.boardPartsNode) {\n                this.boardPartsNode = cc.instantiate(this.boardPartsPrefab);\n                this.node.addChild(this.boardPartsNode);\n            }\n\n            this.boardPartsNode.opacity = 255;\n            this.boardPartsNode.setPosition(boardPos);\n            this.boardPartsNode.getComponent(BoardPartsControlComponent).split();\n        } else {\n            this.stageboss++;\n\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.bossDefeatedAudio, false);\n            }\n\n            if (this.hasRewardKnife || StorageUtils.shared.getString(Constants.KEY_USER_GAINED_KNIFES, \"\").split(\",\").indexOf(this.rewardKnifeId) != -1) {\n                let rewardCoinsAnims = this.rewardCoinShowAnimNode.children;\n\n                let rewardCoins = Math.floor(Math.random() * 10 + 50);\n                this.rewardCoinLabel.getComponent(cc.Label).string = \"+\" + rewardCoins;\n                StorageUtils.shared.putInt(Constants.KEY_CURRENCY, StorageUtils.shared.getInt(Constants.KEY_CURRENCY, 0) + rewardCoins);\n\n                this.rewardCoinShowAnimNode.opacity = 255;\n                for (let i = 0; i < rewardCoinsAnims.length; i++) {\n                    rewardCoinsAnims[i].getComponent(cc.Animation).play();\n                }\n            }\n        }\n\n        this.boardNode.removeAllChildren();\n        this.boardNode.removeFromParent();\n        this.boardNodePool.put(this.boardNode);\n\n        this.fallAllKnifes();\n    }\n\n    public onAppleHit(appleNode: cc.Node, posX: number, posY: number): void {\n        this.apples.rollback(appleNode);\n\n        StorageUtils.shared.putInt(Constants.KEY_CURRENCY, StorageUtils.shared.getInt(Constants.KEY_CURRENCY, 0) + 2);\n        this.currencyLabel.getComponent(cc.Label).string = StorageUtils.shared.getString(Constants.KEY_CURRENCY, \"0\");\n\n        if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n            cc.audioEngine.playEffect(this.hitAppleAudio, false);\n        }\n\n        let applePartsNode: cc.Node = null;\n        if (this.applePartsNodePool.size() == 0) {\n            applePartsNode = cc.instantiate(this.applePartsPrefab);\n        } else {\n            applePartsNode = this.applePartsNodePool.get();\n        }\n\n        this.node.addChild(applePartsNode);\n        applePartsNode.setPosition(this.node.convertToNodeSpaceAR(new cc.Vec2(posX, posY)));\n        applePartsNode.getComponent(ApplePartsControlComponent).split();\n\n        this.applePartsNodes.push(applePartsNode);\n    }\n\n    public onKnifeInserted(): void {\n        this.score++;\n        this.scoreLabel.string = String(this.score);\n\n        this.sparkNode.rotation = -this.node.rotation;\n        this.sparkNode.getComponent(cc.ParticleSystem).resetSystem();\n\n        if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n            if (!this.isBossStage) {\n                cc.audioEngine.playEffect(this.hitNormalBoardAudio, false);\n            } else {\n                ResourceUtil.loadAudioClip(this.bossHitAudioResource, (err, audioClip) => {\n                    cc.audioEngine.playEffect(audioClip, false);\n                });\n            }\n        }\n\n        if (this.nextKnifeNode) {\n            this.nextKnifeNode.removeFromParent();\n            this.backgroundNode.addChild(this.nextKnifeNode, 1);\n            this.nextKnifeNode.getComponent(KnifeControlComponent).ready();\n            this.backgroundNode.on(cc.Node.EventType.TOUCH_START, this.onTouchCallback);\n        }\n    }\n\n    public getCurrentStage(): number {\n        return this.stage;\n    }\n\n    public continuePlay(): void {\n        this.rewardDialogNode.opacity = 0;\n\n        if (this.currentKnifeNode) {\n            this.currentKnifeNode.getComponent(KnifeControlComponent).reset();\n\n            for (let i = 0; i < this.applePartsNodes.length; i++) {\n                this.applePartsNodes[i].removeFromParent();\n                this.applePartsNodePool.put(this.applePartsNodes[i]);\n            }\n\n            this.currentKnifeNode.removeFromParent();\n            this.backgroundNode.addChild(this.currentKnifeNode, 1);\n\n            this.currentKnifeNode.setAnchorPoint(0.5, 0);\n            this.currentKnifeNode.setPosition(new cc.Vec2(0, -(this.backgroundNode.height / 2 - 100)));\n            this.currentKnifeNode.rotation = 0;\n\n            this.backgroundNode.off(cc.Node.EventType.TOUCH_START);\n            this.backgroundNode.on(cc.Node.EventType.TOUCH_START, this.onTouchCallback);\n\n            this.currentKnifeNode.getComponent(KnifeControlComponent).ready();\n            this.boardContainerNode.getComponent(BoardControlComponent).startRotation();\n\n            if (this.hasThrownKnifes) {\n                this.knifes.rollbackKnife();\n                this.remainedKnifesLayoutNode.getComponent(RemainedKnifesComponent).rollbackOneKnife();\n            }\n        } else {\n            this.jumpToNextStage(this.score, this.stageboss, this.hasRewardKnife);\n        }\n    }\n\n    public setUpPlayStage(): void {\n        this.stageLabel.getComponent(cc.Label).string = this.stageTitle;\n        this.currencyLabel.getComponent(cc.Label).string = StorageUtils.shared.getString(Constants.KEY_CURRENCY, \"0\");\n        this.stageProgressBarLayoutNode.getComponent(StageProgressBarComponent).init(this.stage);\n\n        if (this.isBossStage) {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.bossAppearAudio, false);\n            }\n\n            let anims = this.knifeShowAnimNode.children;\n            for (let i = 0; i < anims.length; i++) {\n                anims[i].getComponent(cc.Animation).play();\n            }\n\n            anims[0].getComponent(cc.Animation).on(Constants.EVENT_ANIMATION_FINISH, () => {\n                anims[0].getComponent(cc.Animation).off(Constants.EVENT_ANIMATION_FINISH);\n                this.boardContainerNode.opacity = 255;\n                this.initPlayView();\n            }, this);\n        } else {\n            this.initPlayView();\n        }\n\n        if (StorageUtils.shared.getBoolean(Constants.KEY_LEFT_HAND_SWITCH, false)) {\n            this.remainedKnifesLayoutNode.getComponent(cc.Widget).isAlignLeft = false;\n            this.remainedKnifesLayoutNode.getComponent(cc.Widget).isAlignRight = true;\n            this.remainedKnifesLayoutNode.getComponent(cc.Widget).right = 48;\n        }\n\n        JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Game_Stage_Page_Viewed\");\n    }\n\n    private initPlayView(): void {\n        this.knifes.pushPresetKnifeNodes(this.knifePrefab, this.boardContainerNode, this.node);\n        this.knifes.pushKnifeNodes(this.knifePrefab, this.boardContainerNode, this.backgroundNode, this.node);\n\n        this.remainedKnifesLayoutNode.getComponent(RemainedKnifesComponent).addKnifes(this.knifes.count);\n\n        this.apples.pushAppleNodes(this.applePrefab, this.boardContainerNode, this.boardNode, this.node);\n\n        this.currentKnifeNode = this.knifes.getCurrentKnifeNode();\n        if (this.currentKnifeNode) {\n            this.currentKnifeNode.getComponent(KnifeControlComponent).stageNode = this.node;\n\n            this.backgroundNode.off(cc.Node.EventType.TOUCH_START);\n            this.backgroundNode.on(cc.Node.EventType.TOUCH_START, this.onTouchCallback);\n            //之前是-1不显示\n            this.currentKnifeNode.removeFromParent();\n            this.backgroundNode.addChild(this.currentKnifeNode, 1);\n\n            this.currentKnifeNode.getComponent(KnifeControlComponent).ready();\n            this.boardContainerNode.getComponent(BoardControlComponent).startRotation();\n        } else {\n            this.jumpToNextStage(this.score, this.stageboss, this.hasRewardKnife);\n        }\n\n        this.equipButton.getComponent(cc.Button).enabled = false;\n    }\n\n    public onAllStagesWin(): void {\n        if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n            cc.audioEngine.playEffect(this.getKnifeAudio, false);\n        }\n\n        StorageUtils.shared.putInt(Constants.KEY_CURRENCY, StorageUtils.shared.getInt(Constants.KEY_CURRENCY, 0) + COINS_REWARD_ALL_STAGES_WIN);\n        this.currencyLabel.getComponent(cc.Label).string = StorageUtils.shared.getString(Constants.KEY_CURRENCY, \"0\");\n\n        this.isMaskShow = true;\n        this.giftMask.opacity = 200;\n        this.giftMask.getChildByName(NODE_NAME_GIFT_COIN_COUNT_CONTAINER).getChildByName(NODE_NAME_GIFT_COIN_COUNT).getComponent(cc.Label).string = \"+\" + String(COINS_REWARD_ALL_STAGES_WIN);\n        for (let i = 0; i < Constants.COUNT_GIFT_APPLES; i++) {\n            let applePartsNode = cc.instantiate(this.applePartsPrefab);\n\n            applePartsNode.setPosition(new cc.Vec2(Math.random() * 400 * (Math.random() > 0.5 ? 1 : -1) + 100,\n                Math.random() * 400 - 100));\n            this.giftMask.addChild(applePartsNode);\n            applePartsNode.getComponent(ApplePartsControlComponent).split();\n\n            this.giftApples.push(applePartsNode);\n        }\n\n        this.giftMask.on(cc.Node.EventType.TOUCH_END, () => {\n            this.closeGiftMask();\n        }, this);\n\n        this.scheduleOnce(() => {\n            this.closeGiftMask();\n        }, 2);\n    }\n\n    private closeGiftMask(): void {\n        if (this.isMaskShow) {\n            for (let i = 0; i < this.giftApples.length; i++) {\n                this.node.removeChild(this.giftApples[i]);\n            }\n\n            this.giftMask.opacity = 0;\n            this.isMaskShow = false;\n            this.giftMask.off(cc.Node.EventType.TOUCH_END);\n\n            this.appNode.getComponent(AppComponent).jumpToMainPage();\n        }\n    }\n\n    private onTouchCallback = (event: cc.Event) => {\n        this.backgroundNode.off(cc.Node.EventType.TOUCH_START);\n\n        let currentKnifeNodeTemp = this.knifes.getCurrentKnifeNode();\n\n        if (!currentKnifeNodeTemp) {\n            this.backgroundNode.on(cc.Node.EventType.TOUCH_START, this.onTouchCallback);\n            return;\n        }\n        if (currentKnifeNodeTemp.getComponent(KnifeControlComponent).throw(this.boardContainerNode.position.y\n            - this.boardNode.getContentSize().height / 2\n            - currentKnifeNodeTemp.getComponent(KnifeControlComponent).knifeRealLength)) {\n\n            this.currentKnifeNode = currentKnifeNodeTemp;\n            this.remainedKnifesLayoutNode.getComponent(RemainedKnifesComponent).throwOneKnife();\n\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.knifeThrowAudio, false);\n            }\n\n            this.hasThrownKnifes = true;\n\n            this.nextKnifeNode = this.knifes.getNextKnifeNode();\n            if (!this.nextKnifeNode) {\n                this.backgroundNode.off(cc.Node.EventType.TOUCH_START);\n                this.currentKnifeNode.getComponent(KnifeControlComponent).setLastKnife(true);\n            }\n            this.knifes.moveToNextKnife();\n        } else {\n            this.backgroundNode.on(cc.Node.EventType.TOUCH_START, this.onTouchCallback);\n        }\n    }\n\n    private fallAllKnifes(): void {\n        for (let i = 0; i < this.knifes.getUserKnifes().length; i++) {\n            this.knifes.getUserKnifes()[i].group = GROUP_NAME_DEFAULT;\n        }\n\n        for (let i = 0; i < this.knifes.getPresetKnifes().length; i++) {\n            this.knifes.getPresetKnifes()[i].group = GROUP_NAME_DEFAULT;\n        }\n\n        for (let i = 0; i < this.knifes.getUserKnifes().length; i++) {\n            this.knifes.getUserKnifes()[i].getComponent(KnifeControlComponent).startFalling();\n        }\n\n        for (let i = 0; i < this.knifes.getPresetKnifes().length; i++) {\n            this.knifes.getPresetKnifes()[i].getComponent(KnifeControlComponent).stageNode = this.node;\n            this.knifes.getPresetKnifes()[i].getComponent(KnifeControlComponent).startFalling();\n        }\n    }\n\n    private jumpToNextStage(score: number, stageboss: number, hasRewardKnife: boolean): void {\n        for (let i = 0; i < this.applePartsNodes.length; i++) {\n            this.applePartsNodes[i].removeFromParent();\n            this.applePartsNodePool.put(this.applePartsNodes[i]);\n        }\n        this.remainedKnifesLayoutNode.getComponent(RemainedKnifesComponent).reset();\n        this.knifes.reset();\n        this.apples.reset();\n\n        this.boardContainerNode.opacity = 0;\n        this.boardPartsNode.opacity = 0;\n        this.rewardCoinShowAnimNode.opacity = 0;\n\n        this.fallKnifesCount = 0;\n\n        this.appNode.getComponent(AppComponent).jumpToNextStage(score, stageboss, hasRewardKnife);\n    }\n}\n"]}