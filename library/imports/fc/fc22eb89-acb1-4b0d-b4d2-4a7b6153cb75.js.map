{"version":3,"sources":["../../../../../../assets/script/modules/bridge/assets/script/modules/bridge/PlatformCallJS.ts"],"names":[],"mappings":";;;;;AAAA,yDAAoD;AACpD,6CAA4C;AAC5C,gFAA2E;AAC3E,+DAA0D;AAC1D,uDAAkD;AAClD,mDAA8C;AAM9C;IAAA;IA0DA,CAAC;IAtDiB,mBAAI,GAAlB;QACI,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC;QAE1B,EAAE,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;IAClC,CAAC;IAEa,sBAAO,GAArB,UAAsB,KAAa;QAC/B,IAAI,OAAO,GAAW,sBAAY,CAAC,MAAM,CAAC,MAAM,CAAC,qBAAS,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;QAC5E,sBAAY,CAAC,MAAM,CAAC,MAAM,CAAC,qBAAS,CAAC,YAAY,EAAE,OAAO,GAAG,KAAK,CAAC,CAAC;QAEpE,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC;SACvD;IACL,CAAC;IAEa,gCAAiB,GAA/B,UAAgC,OAAe,EAAE,MAAc;QAE3D,IAAI,MAAM,IAAI,qBAAS,CAAC,kBAAkB,EAAE;YACxC,QAAQ,OAAO,EAAE;gBACb,KAAK,qBAAS,CAAC,qBAAqB,CAAC,CAAC;oBAClC,iCAAuB,CAAC,kBAAkB,EAAE,CAAC;oBAC7C,uBAAa,CAAC,kBAAkB,EAAE,CAAC;oBACnC,MAAM;iBACT;gBAED,KAAK,qBAAS,CAAC,0BAA0B,CAAC,CAAC;oBACvC,2BAAiB,CAAC,sBAAsB,EAAE,CAAC;oBAC3C,MAAM;iBACT;gBAED,OAAO,CAAC,CAAC;oBACL,IAAI,OAAO,CAAC,OAAO,CAAC,qBAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,EAAE;wBACrD,iCAAuB,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;qBACpD;iBACJ;aAEJ;SACJ;QAED,IAAI,MAAM,IAAI,qBAAS,CAAC,gBAAgB,IAAI,OAAO,IAAI,qBAAS,CAAC,0BAA0B,EAAE;YACzF,2BAAiB,CAAC,OAAO,EAAE,CAAC;YAC5B,IAAI,CAAC,2BAAiB,CAAC,eAAe,EAAE,EAAE;gBACtC,uBAAa,CAAC,uBAAuB,EAAE,CAAC;aAC3C;SACJ;IACL,CAAC;IAEa,sCAAuB,GAArC,UAAsC,OAAe,EAAE,MAAc;IAErE,CAAC;IAEa,sBAAO,GAArB;QACI,sBAAY,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IACL,qBAAC;AAAD,CA1DA,AA0DC,IAAA;;AAED,cAAc,CAAC,IAAI,EAAE,CAAC","file":"","sourceRoot":"../../../../../../assets/script/modules/bridge","sourcesContent":["import StorageUtils from \"../../utils/StorageUtils\";\nimport { Constants } from \"../../Constants\";\nimport KnifeWarehouseComponent from \"../warehouse/KnifeWarehouseComponent\";\nimport ContinueComponent from \"../done/ContinueComponent\";\nimport DoneComponent from \"../done/DoneComponent\";\nimport AppComponent from \"../../AppComponent\";\n\ndeclare var window: Window & {\n    PlatformAPI: typeof PlatformCallJS;\n}\n\nexport default class PlatformCallJS {\n\n    public static currencyLabel: cc.Label;\n\n    public static init() {\n        window.PlatformAPI = this;\n\n        cc.log(\"PlatformCallJS init\");\n    }\n\n    public static addGold(count: number): void {\n        let current: number = StorageUtils.shared.getInt(Constants.KEY_CURRENCY, 0);\n        StorageUtils.shared.putInt(Constants.KEY_CURRENCY, current + count);\n\n        if (this.currencyLabel) {\n            this.currencyLabel.string = String(current + count);\n        }\n    }\n\n    public static watchRewardAdCall(message: string, result: string): void {\n\n        if (result == Constants.REWARD_AD_REWARDED) {\n            switch (message) {\n                case Constants.WATCH_AD_FOR_CURRENCY: {\n                    KnifeWarehouseComponent.watchAdForCurrency();\n                    DoneComponent.watchAdForCurrency();\n                    break;\n                }\n\n                case Constants.WATCH_AD_FOR_CONTINUE_GAME: {\n                    ContinueComponent.watchAdForContinueGame();\n                    break;\n                }\n\n                default: {\n                    if (message.indexOf(Constants.WATCH_AD_FOR_KNIFE) != -1) {\n                        KnifeWarehouseComponent.watchAdForKnife(message);\n                    }\n                }\n\n            }\n        }\n\n        if (result == Constants.REWARD_AD_CLOSED && message == Constants.WATCH_AD_FOR_CONTINUE_GAME) {\n            ContinueComponent.closeAd();\n            if (!ContinueComponent.getContinueGame()) {\n                DoneComponent.logFlurryDonePageViewed();\n            }\n        }\n    }\n\n    public static watchInterstitialAdCall(message: string, result: string): void {\n\n    }\n\n    public static endGame(): any {\n        AppComponent.endGame();\n    }\n}\n\nPlatformCallJS.init();\n"]}