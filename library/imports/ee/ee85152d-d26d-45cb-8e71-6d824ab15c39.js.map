{"version":3,"sources":["../../../../assets/script/assets/script/AppComponent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["import PlayStageControlComponent from \"./modules/play/PlayStageControlComponent\";\nimport MainControlComponent from \"./modules/main/MainControlComponent\";\nimport KnifeWarehouseComponent from \"./modules/warehouse/KnifeWarehouseComponent\";\nimport ContinueComponent from \"./modules/done/ContinueComponent\";\nimport DoneComponent from \"./modules/done/DoneComponent\";\nimport StorageUtils from \"./utils/StorageUtils\";\nimport { Constants } from \"./Constants\";\nimport SettingComponent from \"./modules/settings/SettingComponent\";\nimport ConfigUtil from \"./utils/ConfigUtil\";\nimport JSInterfaceUtils from \"./modules/bridge/JSInterfaceUtils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class AppComponent extends cc.Component {\n\n    @property(cc.Prefab)\n    mainPagePrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    playStagePrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    warehousePagePrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    continuePagePrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    donePagePrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    settingPagePrefabe: cc.Prefab = null;\n\n    @property(cc.Node)\n    canvasNode: cc.Node = null;\n\n    private static instance: AppComponent = null;\n\n    private mainPageNode: cc.Node = null;\n    private playStageNode: cc.Node = null;\n    private warehousePageNode: cc.Node = null;\n    private continuePageNode: cc.Node = null;\n    private donePageNode: cc.Node = null;\n    private settingPageNode: cc.Node = null;\n\n    private stage: number = 1;\n    private bestStage: number = 0;\n    private bestScore: number = 0;\n    private stageboss: number = 1;\n    private totalStage: number = 0;\n    private roundCount: number = 0;\n    private enterGameTime: number = new Date().getTime();\n\n    onLoad() {\n        if (!AppComponent.instance) {\n            AppComponent.instance = this;\n        }\n        StorageUtils.shared.init(() => {\n            ConfigUtil.shared.init(() => {\n                this.jumpToMainPage();\n                this.preloadKnifesResource();\n            });\n        });\n    }\n\n    start() {\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        // manager.enabledDrawBoundingBox = true;\n        // manager.enabledDebugDraw = true;\n    }\n\n    // update (dt) {}\n\n    public jumpToMainPage(): void {\n        this.mainPageNode = cc.instantiate(this.mainPagePrefab);\n        this.mainPageNode.getComponent(cc.Widget).target = this.canvasNode;\n        this.mainPageNode.getComponent(MainControlComponent).setClickEvents(this.node);\n        this.mainPageNode.getComponent(MainControlComponent).updateUserKnife();\n\n        this.canvasNode.removeAllChildren();\n        this.canvasNode.addChild(this.mainPageNode);\n    }\n\n    public jumpToPlayStage(): void {\n        this.roundCount++;\n        this.totalStage++;\n        this.bestStage = (this.bestStage == 0 ? 1 : this.bestStage);\n\n        this.stage = 1;\n        this.stageboss = StorageUtils.shared.getInt(Constants.KEY_BOSS, 1);\n        this.stageboss = this.stageboss - 2 > 1 ? this.stageboss - 2 : 1;\n\n        this.stageboss = this.stageboss > Constants.COUNT_TOTAL_BOSS_STAGE ? 1 : this.stageboss;\n\n        StorageUtils.shared.putInt(Constants.KEY_ENTER_PLAY_TIME, new Date().getTime());\n\n        this.playStageNode = cc.instantiate(this.playStagePrefab);\n        this.playStageNode.getComponent(cc.Widget).target = this.canvasNode;\n        this.playStageNode.getComponent(PlayStageControlComponent).init(this.node, this.stage, this.stageboss, 0, false);\n\n        this.canvasNode.removeAllChildren();\n        this.canvasNode.addChild(this.playStageNode);\n\n        JSInterfaceUtils.addShortcut();\n    }\n\n    public continuePlay(): void {\n        this.canvasNode.removeAllChildren();\n\n        if (!this.playStageNode) {\n            this.playStageNode = cc.instantiate(this.playStagePrefab);\n        }\n\n        this.canvasNode.addChild(this.playStageNode);\n        this.playStageNode.getComponent(PlayStageControlComponent).continuePlay();\n    }\n\n    public jumpToNextStage(score: number, stageboss: number, hasRewardKnife: boolean): void {\n        this.stage++;\n\n        this.totalStage++;\n        this.bestStage = (this.bestStage > this.stage ? this.bestStage : this.stage);\n        this.bestScore = (this.bestScore > score ? this.bestScore : score);\n\n        this.stageboss = stageboss;\n        this.stageboss = this.stageboss > Constants.COUNT_TOTAL_BOSS_STAGE ? 1 : this.stageboss;\n        if (this.stageboss > StorageUtils.shared.getInt(Constants.KEY_BOSS, 1)) {\n            StorageUtils.shared.putInt(Constants.KEY_BOSS, this.stageboss);\n        }\n\n        if (this.stage > Constants.COUNT_TOTAL_STAGE) {\n            this.playStageNode.getComponent(PlayStageControlComponent).onAllStagesWin();\n        } else {\n            StorageUtils.shared.putInt(Constants.KEY_STAGE, this.stage);\n\n            if (!this.playStageNode) {\n                this.playStageNode = cc.instantiate(this.playStagePrefab);\n                this.playStageNode.getComponent(cc.Widget).target = this.canvasNode;\n            }\n            this.playStageNode.getComponent(PlayStageControlComponent).init(this.node, this.stage, this.stageboss, score, hasRewardKnife);\n        }\n    }\n\n    public jumpToWarehousePage(): void {\n        this.warehousePageNode = cc.instantiate(this.warehousePagePrefab);\n        this.warehousePageNode.getComponent(cc.Widget).target = this.canvasNode;\n        this.warehousePageNode.getComponent(KnifeWarehouseComponent).init(this.node);\n\n        this.canvasNode.addChild(this.warehousePageNode);\n    }\n\n    public jumpToContinuePage(stage: number, score: number): void {\n        this.bestScore = (this.bestScore > score ? this.bestScore : score);\n\n        if (!JSInterfaceUtils.hasRewardAd()) {\n            this.jumpToDonePage(stage, score);\n            return;\n        }\n\n        this.continuePageNode = cc.instantiate(this.continuePagePrefab);\n        this.continuePageNode.getComponent(cc.Widget).target = this.canvasNode;\n        this.continuePageNode.getComponent(ContinueComponent).init(stage, score, this.node);\n\n        this.canvasNode.addChild(this.continuePageNode);\n    }\n\n    public jumpToDonePage(stage: number, score: number): void {\n        this.bestScore = (this.bestScore > score ? this.bestScore : score);\n\n        this.canvasNode.removeChild(this.continuePageNode);\n\n        this.donePageNode = cc.instantiate(this.donePagePrefab);\n        this.donePageNode.getComponent(cc.Widget).target = this.canvasNode;\n        this.donePageNode.getComponent(DoneComponent).init(stage, score, this.node);\n\n        this.canvasNode.addChild(this.donePageNode);\n        \n        JSInterfaceUtils.watchInterstitialAd(Constants.POSTION_GAME_END, \"\");\n    }\n\n    public getCurrentStage(): number {\n        if (this.playStageNode) {\n            return this.playStageNode.getComponent(PlayStageControlComponent).getCurrentStage();\n        } else {\n            return 1;\n        }\n    }\n\n    public jumpToSettingPage(): void {\n        this.settingPageNode = cc.instantiate(this.settingPagePrefabe);\n        this.settingPageNode.getComponent(cc.Widget).target = this.canvasNode;\n        this.canvasNode.addChild(this.settingPageNode);\n    }\n\n    public updateMainPageKnife(): void {\n        if (this.mainPageNode) {\n            this.mainPageNode.getComponent(MainControlComponent).updateUserKnife();\n        }\n    }\n\n    public static endGame(): void {\n        JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Life_Time\", \n            \"game_time\", String(Math.floor((new Date().getTime() - AppComponent.instance.enterGameTime) / 1000)), \n            \"game_round\", String(AppComponent.instance.roundCount),\n            \"game_stage\", String(AppComponent.instance.totalStage),\n            \"game_best_stage\", String(AppComponent.instance.bestStage),\n            \"game_best_score\", String(AppComponent.instance.bestScore),\n            \"coin_number\", StorageUtils.shared.getString(Constants.KEY_CURRENCY, \"0\"),\n            \"knife_unlock_number\", String(StorageUtils.shared.getString(Constants.KEY_USER_GAINED_KNIFES, Constants.DEFAULT_USER_KNIFE_ID).split(\",\").length));\n    }\n\n    private preloadKnifesResource(): void {\n        let userKnifeId: string = StorageUtils.shared.getString(Constants.KEY_USER_KNIFE, Constants.DEFAULT_USER_KNIFE_ID);\n        let userKnifeIndex: number = ConfigUtil.shared.getIndexFromKnifeId(userKnifeId);\n        for (let index = userKnifeIndex - 3; index < userKnifeIndex; index++) {\n            if (ConfigUtil.shared.hasKnife(ConfigUtil.shared.getKnifeId(index))) {\n                ConfigUtil.shared.getKnifeResourceUrl(ConfigUtil.shared.getKnifeId(index))\n            }\n        }\n        for (let index = userKnifeIndex + 1; index < userKnifeIndex + 4; index++) {\n            if (ConfigUtil.shared.hasKnife(ConfigUtil.shared.getKnifeId(index))) {\n                ConfigUtil.shared.getKnifeResourceUrl(ConfigUtil.shared.getKnifeId(index))\n            }\n        }\n    }\n}\n"]}