{"version":3,"sources":["../../../../../../assets/script/modules/warehouse/assets/script/modules/warehouse/RewardComponent.ts"],"names":[],"mappings":";;;;;AAAA,yDAAoD;AACpD,yDAAoD;AACpD,6CAA4C;AAC5C,qDAAgD;AAE1C,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAA6C,mCAAY;IADzD;QAAA,qEAkDC;QA9CG,uBAAiB,GAAc,IAAI,CAAC;QAGpC,iBAAW,GAAc,IAAI,CAAC;QAG9B,iBAAW,GAAc,IAAI,CAAC;QAEtB,gBAAU,GAAW,CAAC,CAAC;QAEvB,mBAAa,GAAe,IAAI,CAAC;;IAoC7C,CAAC;IAlCG,gCAAM,GAAN;QAAA,iBAsBC;QArBG,sBAAY,CAAC,aAAa,CAAC,oBAAU,CAAC,MAAM,CAAC,mBAAmB,CAAC,oBAAU,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,UAAC,KAAY,EAAE,QAAwB;YACpJ,KAAI,CAAC,iBAAiB,CAAC,WAAW,GAAG,QAAQ,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;YAClD,IAAI,sBAAY,CAAC,MAAM,CAAC,UAAU,CAAC,qBAAS,CAAC,gBAAgB,EAAE,IAAI,CAAC,EAAE;gBAClE,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,KAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aACxF;YAED,sBAAY,CAAC,MAAM,CAAC,SAAS,CAAC,qBAAS,CAAC,cAAc,EAAE,oBAAU,CAAC,MAAM,CAAC,UAAU,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACvG,KAAI,CAAC,aAAa,EAAE,CAAC;YACrB,KAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACjC,CAAC,EAAE,IAAI,CAAC,CAAC;QAET,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;YAClD,IAAI,sBAAY,CAAC,MAAM,CAAC,UAAU,CAAC,qBAAS,CAAC,gBAAgB,EAAE,IAAI,CAAC,EAAE;gBAClE,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,KAAI,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aACxF;YAED,KAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACjC,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IAED,+BAAK,GAAL;IAEA,CAAC;IAED,iBAAiB;IAEV,8BAAI,GAAX,UAAY,UAAkB,EAAE,aAAyB;QACrD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACvC,CAAC;IA7CD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;8DACgB;IAGpC;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wDACU;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;wDACU;IATb,eAAe;QADnC,OAAO;OACa,eAAe,CAiDnC;IAAD,sBAAC;CAjDD,AAiDC,CAjD4C,EAAE,CAAC,SAAS,GAiDxD;kBAjDoB,eAAe","file":"","sourceRoot":"../../../../../../assets/script/modules/warehouse","sourcesContent":["import ResourceUtil from \"../../utils/ResourceUtil\";\nimport StorageUtils from \"../../utils/StorageUtils\";\nimport { Constants } from \"../../Constants\";\nimport ConfigUtil from \"../../utils/ConfigUtil\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class RewardComponent extends cc.Component {\n\n    @property(cc.Sprite)\n    rewardKnifeSprite: cc.Sprite = null;\n\n    @property(cc.Button)\n    equipButton: cc.Button = null;\n\n    @property(cc.Button)\n    closeButton: cc.Button = null;\n\n    private knifeIndex: number = 1;\n\n    private equipCallback: () => void = null;\n\n    onLoad() {\n        ResourceUtil.loadSpriteRes(ConfigUtil.shared.getKnifeResourceUrl(ConfigUtil.shared.getKnifeId(this.knifeIndex)), (error: Error, resource: cc.SpriteFrame) => {\n            this.rewardKnifeSprite.spriteFrame = resource;\n        });\n\n        this.equipButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.equipButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            StorageUtils.shared.putString(Constants.KEY_USER_KNIFE, ConfigUtil.shared.getKnifeId(this.knifeIndex));\n            this.equipCallback();\n            this.node.removeFromParent();\n        }, this);\n\n        this.closeButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.closeButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            this.node.removeFromParent();\n        }, this);\n    }\n\n    start() {\n\n    }\n\n    // update (dt) {}\n\n    public init(knifeIndex: number, equipCallback: () => void): void {\n        this.knifeIndex = knifeIndex;\n        this.equipCallback = equipCallback;\n    }\n}\n"]}