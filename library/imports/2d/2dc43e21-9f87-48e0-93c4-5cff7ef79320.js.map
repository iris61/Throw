{"version":3,"sources":["../../../../../../assets/script/modules/main/assets/script/modules/main/MainControlComponent.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/script/modules/main","sourcesContent":["import AppComponent from \"../../AppComponent\";\nimport StorageUtils from \"../../utils/StorageUtils\";\nimport ResourceUtil from \"../../utils/ResourceUtil\";\nimport { Constants } from \"../../Constants\";\nimport JSInterfaceUtils from \"../bridge/JSInterfaceUtils\";\nimport GiftComponent from \"../../components/GiftComponent\";\nimport ConfigUtil from \"../../utils/ConfigUtil\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class MainControlComponent extends cc.Component {\n\n    @property(cc.Node)\n    knifeNode: cc.Node = null;\n\n    @property(cc.Label)\n    currencyLabel: cc.Label = null;\n\n    @property(cc.Button)\n    playButton: cc.Button = null;\n\n    @property(cc.Button)\n    shopButton: cc.Button = null;\n\n    @property(cc.Button)\n    settingButton: cc.Button = null;\n\n    @property(cc.Button)\n    giftButton: cc.Button = null;\n\n    onLoad() {\n        this.currencyLabel.getComponent(cc.Label).string = StorageUtils.shared.getString(Constants.KEY_CURRENCY, \"0\");\n    }\n\n    start() {\n        JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Home_Page_Viewed\", \"gift_status\",\n            this.giftButton.getComponent(GiftComponent).isReady() ? \"ready\" : \"not_ready\");\n    }\n\n    public setClickEvents(appNode: cc.Node): void {\n        this.playButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.playButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            appNode.getComponent(AppComponent).jumpToPlayStage();\n\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Home_Play_Game_Clicked\");\n            JSInterfaceUtils.logAutopilotEvent(\"play_game_click\");\n        }, this);\n\n        this.shopButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.shopButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            appNode.getComponent(AppComponent).jumpToWarehousePage();\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Home_Icon_Clicked\", \"which_icon\", \"store\");\n        }, this);\n\n        this.settingButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            if (StorageUtils.shared.getBoolean(Constants.KEY_SOUND_SWITCH, true)) {\n                cc.audioEngine.playEffect(this.settingButton.getComponent(cc.AudioSource).clip, false);\n            }\n\n            appNode.getComponent(AppComponent).jumpToSettingPage();\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Home_Icon_Clicked\", \"which_icon\", \"setting\");\n        }, this);\n\n        this.giftButton.node.on(cc.Node.EventType.TOUCH_END, () => {\n            JSInterfaceUtils.logAnalyticsEvent(\"ThrowingMaster_Home_Icon_Clicked\", \"which_icon\", \"gift\");\n        }, this);\n    }\n\n    public updateUserKnife(): void {\n        ResourceUtil.loadSpriteRes(ConfigUtil.shared.getKnifeResourceUrl(\n            StorageUtils.shared.getString(Constants.KEY_USER_KNIFE, Constants.DEFAULT_USER_KNIFE_ID)), (error: Error, resource: cc.SpriteFrame) => {\n                this.knifeNode.getComponent(cc.Sprite).spriteFrame = resource;\n                this.knifeNode.opacity = 255;\n            });\n    }\n}\n"]}